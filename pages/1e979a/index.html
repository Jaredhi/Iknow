<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySql | Jared&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="https://www.jaredh.cn/.vuepress/public/img/%E7%BA%B8%E9%A3%9E%E6%9C%BA.png">
    <meta name="description" content="知识积累库">
    <meta name="keywords" content="个人技术博客,全栈,全栈开发,DevOps,框架,技术文档,学习,Java,Spring,TypeScript,vue,git,markdown">
    <meta name="theme-color" content="#1166cd">
    <link rel="preload" href="/assets/css/0.styles.44d0f432.css" as="style"><link rel="preload" href="/assets/js/app.dce23f32.js" as="script"><link rel="preload" href="/assets/js/2.0a476569.js" as="script"><link rel="preload" href="/assets/js/3.03310ead.js" as="script"><link rel="preload" href="/assets/js/39.52ce0e61.js" as="script"><link rel="prefetch" href="/assets/js/10.be7f436c.js"><link rel="prefetch" href="/assets/js/100.c5faf45f.js"><link rel="prefetch" href="/assets/js/101.42e0ac50.js"><link rel="prefetch" href="/assets/js/102.bb14e64b.js"><link rel="prefetch" href="/assets/js/103.81bf3c7c.js"><link rel="prefetch" href="/assets/js/104.d1c8d8f0.js"><link rel="prefetch" href="/assets/js/105.d7aa788f.js"><link rel="prefetch" href="/assets/js/106.39cb6fdd.js"><link rel="prefetch" href="/assets/js/107.b26b0841.js"><link rel="prefetch" href="/assets/js/108.41d302aa.js"><link rel="prefetch" href="/assets/js/109.f4382788.js"><link rel="prefetch" href="/assets/js/11.32bd7745.js"><link rel="prefetch" href="/assets/js/110.3d84f092.js"><link rel="prefetch" href="/assets/js/111.2c7a7ff1.js"><link rel="prefetch" href="/assets/js/112.23adafb9.js"><link rel="prefetch" href="/assets/js/113.f6aeaecd.js"><link rel="prefetch" href="/assets/js/114.2012c13a.js"><link rel="prefetch" href="/assets/js/115.bf3e2dbe.js"><link rel="prefetch" href="/assets/js/116.3bd9a150.js"><link rel="prefetch" href="/assets/js/117.ab19fd54.js"><link rel="prefetch" href="/assets/js/118.9ad186b9.js"><link rel="prefetch" href="/assets/js/119.a193d528.js"><link rel="prefetch" href="/assets/js/12.ef6ddb2c.js"><link rel="prefetch" href="/assets/js/120.c614caf0.js"><link rel="prefetch" href="/assets/js/121.5b0e0013.js"><link rel="prefetch" href="/assets/js/13.35718513.js"><link rel="prefetch" href="/assets/js/14.278daae5.js"><link rel="prefetch" href="/assets/js/15.075b8007.js"><link rel="prefetch" href="/assets/js/16.e764165f.js"><link rel="prefetch" href="/assets/js/17.0dde71b9.js"><link rel="prefetch" href="/assets/js/18.952ee688.js"><link rel="prefetch" href="/assets/js/19.d3d3a5e3.js"><link rel="prefetch" href="/assets/js/20.0cce088c.js"><link rel="prefetch" href="/assets/js/21.7f609d23.js"><link rel="prefetch" href="/assets/js/22.ff109b73.js"><link rel="prefetch" href="/assets/js/23.22e55119.js"><link rel="prefetch" href="/assets/js/24.478b668f.js"><link rel="prefetch" href="/assets/js/25.40934b51.js"><link rel="prefetch" href="/assets/js/26.a8915e14.js"><link rel="prefetch" href="/assets/js/27.9511311d.js"><link rel="prefetch" href="/assets/js/28.6fb9c9bb.js"><link rel="prefetch" href="/assets/js/29.6596af6d.js"><link rel="prefetch" href="/assets/js/30.e47e8fc2.js"><link rel="prefetch" href="/assets/js/31.5054b3ba.js"><link rel="prefetch" href="/assets/js/32.ef73b689.js"><link rel="prefetch" href="/assets/js/33.02c0883b.js"><link rel="prefetch" href="/assets/js/34.d46d5592.js"><link rel="prefetch" href="/assets/js/35.575c59a9.js"><link rel="prefetch" href="/assets/js/36.763c2ec0.js"><link rel="prefetch" href="/assets/js/37.ff0010d5.js"><link rel="prefetch" href="/assets/js/38.f68cf0f1.js"><link rel="prefetch" href="/assets/js/4.12ba5ea4.js"><link rel="prefetch" href="/assets/js/40.f682666a.js"><link rel="prefetch" href="/assets/js/41.a89c7af8.js"><link rel="prefetch" href="/assets/js/42.e6b5082b.js"><link rel="prefetch" href="/assets/js/43.5c70f9c4.js"><link rel="prefetch" href="/assets/js/44.d423d97b.js"><link rel="prefetch" href="/assets/js/45.3accf45c.js"><link rel="prefetch" href="/assets/js/46.adead9ed.js"><link rel="prefetch" href="/assets/js/47.45febb5f.js"><link rel="prefetch" href="/assets/js/48.91e54ab7.js"><link rel="prefetch" href="/assets/js/49.b6bdbd76.js"><link rel="prefetch" href="/assets/js/5.b2da7372.js"><link rel="prefetch" href="/assets/js/50.3a045da3.js"><link rel="prefetch" href="/assets/js/51.a2eae4fb.js"><link rel="prefetch" href="/assets/js/52.a0f21da8.js"><link rel="prefetch" href="/assets/js/53.62b2f532.js"><link rel="prefetch" href="/assets/js/54.f893c428.js"><link rel="prefetch" href="/assets/js/55.50e21f24.js"><link rel="prefetch" href="/assets/js/56.98d91913.js"><link rel="prefetch" href="/assets/js/57.98167654.js"><link rel="prefetch" href="/assets/js/58.c1ddc2f0.js"><link rel="prefetch" href="/assets/js/59.681ea709.js"><link rel="prefetch" href="/assets/js/6.1995ebab.js"><link rel="prefetch" href="/assets/js/60.df1b91b1.js"><link rel="prefetch" href="/assets/js/61.fabace57.js"><link rel="prefetch" href="/assets/js/62.29da048d.js"><link rel="prefetch" href="/assets/js/63.918fe3f6.js"><link rel="prefetch" href="/assets/js/64.12856044.js"><link rel="prefetch" href="/assets/js/65.6ebfb4a2.js"><link rel="prefetch" href="/assets/js/66.770ad29e.js"><link rel="prefetch" href="/assets/js/67.80bd9ed5.js"><link rel="prefetch" href="/assets/js/68.b55578de.js"><link rel="prefetch" href="/assets/js/69.fa66951c.js"><link rel="prefetch" href="/assets/js/7.9c6de7b0.js"><link rel="prefetch" href="/assets/js/70.bf0ffdac.js"><link rel="prefetch" href="/assets/js/71.40ba910e.js"><link rel="prefetch" href="/assets/js/72.8a811346.js"><link rel="prefetch" href="/assets/js/73.63d2cd5a.js"><link rel="prefetch" href="/assets/js/74.44ca88ab.js"><link rel="prefetch" href="/assets/js/75.d5548bc0.js"><link rel="prefetch" href="/assets/js/76.ecd79f6f.js"><link rel="prefetch" href="/assets/js/77.8fbe5c6a.js"><link rel="prefetch" href="/assets/js/78.005604f5.js"><link rel="prefetch" href="/assets/js/79.59585fa6.js"><link rel="prefetch" href="/assets/js/8.46697342.js"><link rel="prefetch" href="/assets/js/80.2088fa05.js"><link rel="prefetch" href="/assets/js/81.17d30c5d.js"><link rel="prefetch" href="/assets/js/82.a080e5a7.js"><link rel="prefetch" href="/assets/js/83.96495564.js"><link rel="prefetch" href="/assets/js/84.28381bdd.js"><link rel="prefetch" href="/assets/js/85.655161e7.js"><link rel="prefetch" href="/assets/js/86.34a8880c.js"><link rel="prefetch" href="/assets/js/87.a407b8ed.js"><link rel="prefetch" href="/assets/js/88.da255f54.js"><link rel="prefetch" href="/assets/js/89.1f937db1.js"><link rel="prefetch" href="/assets/js/9.2980261e.js"><link rel="prefetch" href="/assets/js/90.44ed90c7.js"><link rel="prefetch" href="/assets/js/91.d0ebb249.js"><link rel="prefetch" href="/assets/js/92.fb7501ee.js"><link rel="prefetch" href="/assets/js/93.bf965309.js"><link rel="prefetch" href="/assets/js/94.08340d37.js"><link rel="prefetch" href="/assets/js/95.9a1cc6b8.js"><link rel="prefetch" href="/assets/js/96.aae0ce80.js"><link rel="prefetch" href="/assets/js/97.d7531130.js"><link rel="prefetch" href="/assets/js/98.f247833a.js"><link rel="prefetch" href="/assets/js/99.09ceb6de.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44d0f432.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://www.jaredh.cn/public/gif/go.gif" alt="Jared's blog" class="logo"> <span class="site-name can-hide">Jared's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/codeBasics/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/cad62e/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/c47e12/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/41a364/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/15ab06/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/1e979a/" aria-current="page" class="nav-link router-link-exact-active router-link-active">数据库SQL</a></li><li class="dropdown-item"><!----> <a href="/pages/b5c9b5/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="研发工具" class="dropdown-title"><a href="/R&amp;D-Tools/" class="link-title">研发工具</a> <span class="title" style="display:none;">研发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4d971e/" class="nav-link">集成开发环境</a></li><li class="dropdown-item"><!----> <a href="/pages/8a8aed/" class="nav-link">Linux系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3a1708/" class="nav-link">代码管理</a></li><li class="dropdown-item"><!----> <a href="/pages/40b1d2/" class="nav-link">项目管理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/framework/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/734f2c/" class="nav-link">中间件</a></li><li class="dropdown-subitem"><a href="/pages/42ed09/" class="nav-link">Spring家族</a></li><li class="dropdown-subitem"><a href="/pages/31cc55/" class="nav-link">服务器软件</a></li><li class="dropdown-subitem"><a href="/pages/8ec421/" class="nav-link">数据库</a></li><li class="dropdown-subitem"><a href="/pages/4b933d/" class="nav-link">搜索引擎</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">分布式&amp;微服务</a></li><li class="dropdown-subitem"><a href="/pages/91630a/" class="nav-link">容器化</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5038fc/" class="nav-link">基础</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">模板框架</a></li><li class="dropdown-subitem"><a href="/pages/99eb21/" class="nav-link">组件化框架</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维相关" class="dropdown-title"><a href="/ops/" class="link-title">运维相关</a> <span class="title" style="display:none;">运维相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/51470f/" class="nav-link">运维知识</a></li><li class="dropdown-item"><!----> <a href="/pages/f1406d/" class="nav-link">部署工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/079753/" class="nav-link">在线教育</a></li><li class="dropdown-item"><!----> <a href="/pages/dd9f23/" class="nav-link">电商</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3a5f05/" class="nav-link">疑惑日志</a></li><li class="dropdown-item"><!----> <a href="/pages/7176e3/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/link/" class="nav-link">友链</a></li><li class="dropdown-item"><!----> <a href="/books/index.html" class="nav-link">书籍</a></li><li class="dropdown-item"><!----> <a href="/relaxation/index.html" class="nav-link">娱乐</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Jaredhi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Jared-h" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/HIHE_i" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://jaredh.oss-cn-shenzhen.aliyuncs.com/public/img/me1.png"> <div class="blogger-info"><h3>    Jared H   </h3> <span>  💻🤣😜  </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/codeBasics/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/cad62e/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/c47e12/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/41a364/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/15ab06/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/1e979a/" aria-current="page" class="nav-link router-link-exact-active router-link-active">数据库SQL</a></li><li class="dropdown-item"><!----> <a href="/pages/b5c9b5/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="研发工具" class="dropdown-title"><a href="/R&amp;D-Tools/" class="link-title">研发工具</a> <span class="title" style="display:none;">研发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4d971e/" class="nav-link">集成开发环境</a></li><li class="dropdown-item"><!----> <a href="/pages/8a8aed/" class="nav-link">Linux系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3a1708/" class="nav-link">代码管理</a></li><li class="dropdown-item"><!----> <a href="/pages/40b1d2/" class="nav-link">项目管理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/framework/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/734f2c/" class="nav-link">中间件</a></li><li class="dropdown-subitem"><a href="/pages/42ed09/" class="nav-link">Spring家族</a></li><li class="dropdown-subitem"><a href="/pages/31cc55/" class="nav-link">服务器软件</a></li><li class="dropdown-subitem"><a href="/pages/8ec421/" class="nav-link">数据库</a></li><li class="dropdown-subitem"><a href="/pages/4b933d/" class="nav-link">搜索引擎</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">分布式&amp;微服务</a></li><li class="dropdown-subitem"><a href="/pages/91630a/" class="nav-link">容器化</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5038fc/" class="nav-link">基础</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">模板框架</a></li><li class="dropdown-subitem"><a href="/pages/99eb21/" class="nav-link">组件化框架</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维相关" class="dropdown-title"><a href="/ops/" class="link-title">运维相关</a> <span class="title" style="display:none;">运维相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/51470f/" class="nav-link">运维知识</a></li><li class="dropdown-item"><!----> <a href="/pages/f1406d/" class="nav-link">部署工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/079753/" class="nav-link">在线教育</a></li><li class="dropdown-item"><!----> <a href="/pages/dd9f23/" class="nav-link">电商</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3a5f05/" class="nav-link">疑惑日志</a></li><li class="dropdown-item"><!----> <a href="/pages/7176e3/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/link/" class="nav-link">友链</a></li><li class="dropdown-item"><!----> <a href="/books/index.html" class="nav-link">书籍</a></li><li class="dropdown-item"><!----> <a href="/relaxation/index.html" class="nav-link">娱乐</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Jaredhi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Jared-h" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/HIHE_i" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库-SQL</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1e979a/" aria-current="page" class="active sidebar-link">MySql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1e979a/#第一天" class="sidebar-link">第一天</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1e979a/#_1-sql-db-dbms-分别是什么-他们之间的关系" class="sidebar-link">1. SQL, DB, DBMS 分别是什么， 他们之间的关系？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_2-什么是表" class="sidebar-link">2. 什么是表？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_3-学习通用的-sql-语句-sql-语句分类" class="sidebar-link">3. 学习通用的 SQL 语句，sql 语句分类：</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_4-数据库导入数据" class="sidebar-link">4.数据库导入数据</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_5-什么是-sql-脚本" class="sidebar-link">5. 什么是 sql 脚本？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_6-删除数据库" class="sidebar-link">6. 删除数据库</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_7-查看表结构" class="sidebar-link">7.查看表结构</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_8-常用命令" class="sidebar-link">8. 常用命令？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_9-查看创建表时的-sql-语句" class="sidebar-link">9. 查看创建表时的 Sql 语句：</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_10-简单的查询语句-dql" class="sidebar-link">10. 简单的查询语句（DQL）</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_11-条件查询" class="sidebar-link">11. 条件查询</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_12-排序-升序-降序" class="sidebar-link">12. 排序（升序， 降序）</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_13-分组函数-多行处理" class="sidebar-link">13. 分组函数（多行处理）</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_14-单行处理函数" class="sidebar-link">14. 单行处理函数</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_15-分组查询-group-by-和-having" class="sidebar-link">15. 分组查询(group by 和 having)</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_16-总结一个完整的-dql-语句怎么写" class="sidebar-link">16.总结一个完整的 DQL 语句怎么写？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#遗留问题" class="sidebar-link">遗留问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#第二天" class="sidebar-link">第二天</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1e979a/#_1、连接查询" class="sidebar-link">1、连接查询</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_2、子查询" class="sidebar-link">2、子查询</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_3、union-可以将查询结果集相加" class="sidebar-link">3、union （可以将查询结果集相加）</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_4、limit" class="sidebar-link">4、limit</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_5、创建表" class="sidebar-link">5、创建表：</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_6、insert语句插入数据" class="sidebar-link">6、insert语句插入数据</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_7、表的复制" class="sidebar-link">7、表的复制</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_8、将查询结果插入到一张表中" class="sidebar-link">8、将查询结果插入到一张表中？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_9、修改数据-update" class="sidebar-link">9、修改数据：update</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_10、删除数据" class="sidebar-link">10、删除数据？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_11、对于表结构的修改" class="sidebar-link">11、对于表结构的修改</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_12、约束-constraint" class="sidebar-link">12、约束(Constraint)</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#第三天" class="sidebar-link">第三天</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/1e979a/#_1、约束" class="sidebar-link">1、约束</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_2、存储引擎" class="sidebar-link">2、存储引擎？</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_3、事务-transaction" class="sidebar-link">3、事务(Transaction)</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_4、索引" class="sidebar-link">4、索引</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_5、视图-view" class="sidebar-link">5、视图(view)</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_6、dba命令" class="sidebar-link">6、DBA命令</a></li><li class="sidebar-sub-header"><a href="/pages/1e979a/#_7、数据库设计三范式-重点内容-面试经常会问" class="sidebar-link">7、数据库设计三范式(重点内容，面试经常会问)</a></li></ul></li></ul></li><li><a href="/pages/ddc20a/" class="sidebar-link">锁</a></li><li><a href="/pages/8b3a2a/" class="sidebar-link">JDBC</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-283013c6><div class="articleInfo" data-v-283013c6><ul class="breadcrumbs" data-v-283013c6><li data-v-283013c6><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-283013c6></a></li> <li data-v-283013c6><a href="/codeBasics" title="编程基础-目录页" data-v-283013c6>编程基础</a></li> <li data-v-283013c6><a href="/codeBasics/#数据库-SQL" title="编程基础#数据库-SQL" data-v-283013c6>数据库-SQL</a></li> <!----></ul> <div class="info" data-v-283013c6><div title="作者" class="author iconfont icon-touxiang" data-v-283013c6><a href="https://github.com/Jaredhi" target="_blank" title="作者" class="beLink" data-v-283013c6>Jared H</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-283013c6><a href="javascript:;" data-v-283013c6>2020-09-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          MySql
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><p>▶️ <a href="https://www.bilibili.com/video/BV1fx411X7BD" target="_blank" rel="noopener noreferrer">杜老师MySql数据基础库入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="第一天"><a href="#第一天" class="header-anchor">#</a> 第一天</h2> <h3 id="_1-sql-db-dbms-分别是什么-他们之间的关系"><a href="#_1-sql-db-dbms-分别是什么-他们之间的关系" class="header-anchor">#</a> 1. SQL, DB, DBMS 分别是什么， 他们之间的关系？</h3> <div class="custom-block tip"><p class="custom-block-title">DB</p> <p>DataBase (数据库， 实际上在硬盘上以文件的形似存在)</p></div> <div class="custom-block tip"><p class="custom-block-title">DBMS</p> <p>Database Management System（数据库管理系统，常见的有：MySQL, Oracle DB2 Sybase, SqlServer...）</p></div> <div class="custom-block tip"><p class="custom-block-title">SQL</p> <p>结构化查询语言， 是一门标准通用语言， 标准的sql语句适用于所有的数据库产品</p></div> <p>DBMS 负责执行 sql 语句， 通过执行 sql 语句来操作 db 中的数据</p> <p>DBMS -（执行）-&gt; SQL 语句 -（操作）-&gt; DB</p> <h3 id="_2-什么是表"><a href="#_2-什么是表" class="header-anchor">#</a> 2. 什么是表？</h3> <p>表是数据库的基本组成单元， 所有的数据都以表格的格式组织</p> <p>一个表包括行和列：</p> <p>行：被称为数据/记录</p> <p>列：被称为字段</p> <ul><li><p>每个字段名包含哪些信息：</p> <p>字段名， 数据类型， 相关约束</p></li></ul> <h3 id="_3-学习通用的-sql-语句-sql-语句分类"><a href="#_3-学习通用的-sql-语句-sql-语句分类" class="header-anchor">#</a> 3. 学习通用的 SQL 语句，sql 语句分类：</h3> <table><thead><tr><th>NAME</th> <th>DESC</th> <th>FNAME</th></tr></thead> <tbody><tr><td>DQL（数据库查询语言）</td> <td>查询语句， 凡是 select 语句都是 DQL</td> <td>Data Query Language</td></tr> <tr><td>DML（数据操作语言）</td> <td>insert /delete /update 对表当中的数据进行增删改</td> <td>Data manipulation language</td></tr> <tr><td>DDL（数据定义语言）</td> <td>create drop alter ， 对表结构的增删改</td> <td>Data definition language</td></tr> <tr><td>TCL（事务控制语言）</td> <td>commit 提交事务， rollback 回滚事务</td> <td>Transaction Control Language</td></tr> <tr><td>DCL（数据控制语言）</td> <td>grant 授权， revoke 撤销权限等</td> <td>Data Control Language</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 增</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名 <span class="token punctuation">(</span>字段名<span class="token number">1</span>，字段名<span class="token number">2</span>，…<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>值<span class="token number">1</span>，值<span class="token number">2</span>，…<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 删</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> 表名 <span class="token punctuation">[</span><span class="token keyword">WHERE</span> 条件表达式<span class="token punctuation">]</span>
<span class="token comment">-- 删除表中全部数据</span>
TRUNCTE <span class="token punctuation">[</span><span class="token keyword">TABLE</span><span class="token punctuation">]</span> 表名
<span class="token comment">-- 改</span>
<span class="token keyword">UPDATE</span> 表名 <span class="token keyword">SET</span> 字段名<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span>，<span class="token punctuation">[</span> ，字段名<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span>，…<span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token keyword">WHERE</span> 条件表达式 <span class="token punctuation">]</span>
<span class="token comment">-- 查</span>
<span class="token keyword">SELECT</span> 字段名<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> 表名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_4-数据库导入数据"><a href="#_4-数据库导入数据" class="header-anchor">#</a> 4.数据库导入数据</h3> <ul><li><p>第 1 步. 登录 mysql 管理系统
<code>mysql -u 用户名 -p 密码</code></p></li> <li><p>第 2 步. 查看有哪些数据库
<code>show databases;</code> (这个不是 SQL 语句，属于 mysql 的命令)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> show databases<span class="token punctuation">;</span>
+--------------------+
<span class="token operator">|</span> Database           <span class="token operator">|</span>
+--------------------+
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> mysql              <span class="token operator">|</span>
<span class="token operator">|</span> performance_schema <span class="token operator">|</span>
<span class="token operator">|</span> sys                <span class="token operator">|</span>
+--------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>第 3 步. 创建属于我们自己的数据库
<code>create database mydbtest;</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> show databases<span class="token punctuation">;</span>
+--------------------+
<span class="token operator">|</span> Database           <span class="token operator">|</span>
+--------------------+
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> mydbtest  		     <span class="token operator">|</span>
<span class="token operator">|</span> mysql              <span class="token operator">|</span>
<span class="token operator">|</span> performance_schema <span class="token operator">|</span>
<span class="token operator">|</span> sys                <span class="token operator">|</span>
+--------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>第 4 步. 使用数据库
<code>use mydbtest;</code></p></li> <li><p>第 5 步. 查看当前使用的数据库中有哪些表？
<code>show tables;</code></p></li> <li><p>第 6 步. 初始化数据</p> <p><code>source \Users\Desktop\mydbtest.sql</code> <a href="https://jaredh.oss-cn-shenzhen.aliyuncs.com/sql/mydbtest.sql" target="_blank" rel="noopener noreferrer">⬇️ sql脚本下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>第 7 步. 初始化之后数据后，查看该数据库</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> show tables<span class="token punctuation">;</span>
+-----------------------+
<span class="token operator">|</span> Tables_in_mydbtest <span class="token operator">|</span>
+-----------------------+
<span class="token operator">|</span> dept                  <span class="token operator">|</span>
<span class="token operator">|</span> emp                   <span class="token operator">|</span>
<span class="token operator">|</span> salgrade              <span class="token operator">|</span>
+-----------------------+
<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h3 id="_5-什么是-sql-脚本"><a href="#_5-什么是-sql-脚本" class="header-anchor">#</a> 5. 什么是 sql 脚本？</h3> <blockquote><p>当一个文件的扩展名是 <code>.sql</code>, 并且该文件编写了大量的 sql 语句， 我们称这样的文件为 sql 脚本</p></blockquote> <p><em>注意：可以直接使用 source 某路径下的 sql 脚本执行某个 sql 文件，进行导入数据到某个表，导入之前一定要先创建表</em></p> <h3 id="_6-删除数据库"><a href="#_6-删除数据库" class="header-anchor">#</a> 6. 删除数据库</h3> <p><code>drop database mydbtest;</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> drop database mydbtest<span class="token punctuation">;</span>
Query OK, <span class="token number">3</span> rows affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-查看表结构"><a href="#_7-查看表结构" class="header-anchor">#</a> 7.查看表结构</h3> <p><code>desc 表名;</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> desc emp<span class="token punctuation">;</span>
+----------+-------------+------+-----+---------+-------+
<span class="token operator">|</span> Field    <span class="token operator">|</span> Type        <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default <span class="token operator">|</span> Extra <span class="token operator">|</span>
+----------+-------------+------+-----+---------+-------+
<span class="token operator">|</span> EMPNO    <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>      <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> ENAME    <span class="token operator">|</span> varchar<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token environment constant">JOB</span>      <span class="token operator">|</span> varchar<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> MGR      <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>      <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> HIREDATE <span class="token operator">|</span> <span class="token function">date</span>        <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> SAL      <span class="token operator">|</span> double<span class="token punctuation">(</span><span class="token number">7,2</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> COMM     <span class="token operator">|</span> double<span class="token punctuation">(</span><span class="token number">7,2</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> DEPTNO   <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>      <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
+----------+-------------+------+-----+---------+-------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_8-常用命令"><a href="#_8-常用命令" class="header-anchor">#</a> 8. 常用命令？</h3> <ul><li><p>查看当前使用的哪个数据库</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> database<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看 mysql 版本</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>\c</code> 命令， 结束一条 sql 语句</p></li> <li><p><code>exit</code> 命令， 退出 mysql</p></li></ul> <h3 id="_9-查看创建表时的-sql-语句"><a href="#_9-查看创建表时的-sql-语句" class="header-anchor">#</a> 9. 查看创建表时的 Sql 语句：</h3> <p><code>show create table 表名</code></p> <h3 id="_10-简单的查询语句-dql"><a href="#_10-简单的查询语句-dql" class="header-anchor">#</a> 10. 简单的查询语句（DQL）</h3> <p><strong>语法格式：</strong></p> <p><code>select 字段名 1,字段名 2,... from 表名;</code></p> <p><strong>提示：</strong></p> <ol><li>任意一条 sql 语句以 <code>;</code> 结尾。</li> <li>sql 语句不区分大小写。</li></ol> <ul><li>查询员工的年新？(字段可以参与数学运算)</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> ename, sal * <span class="token number">12</span> from emp<span class="token punctuation">;</span>
+--------+----------+
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal * <span class="token number">12</span> <span class="token operator">|</span>
+--------+----------+
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">9600.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">19200.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">15000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">35700.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> <span class="token number">15000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">34200.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">29400.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> <span class="token number">36000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">60000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">18000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> <span class="token number">13200.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> <span class="token number">11400.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">36000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">15600.00</span> <span class="token operator">|</span>
+--------+----------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>给查询结果的列重命名</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> ename, sal * <span class="token number">12</span> as sal from emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>别名中有中文？</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> ename, sal * <span class="token number">12</span> as <span class="token string">'年薪'</span> from emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>注意：标准的 sql 语句，要求以单引号括起来，不要使用双引号</em></p> <ul><li>查询所有字段？</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 实际开发中不要这样写, 运行时， 会先将 * 转成所有的字段名， 速度比较慢</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_11-条件查询"><a href="#_11-条件查询" class="header-anchor">#</a> 11. 条件查询</h3> <p><strong>语法格式：</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 字段 <span class="token number">1</span><span class="token punctuation">,</span>字段 <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 条件
<span class="token comment">-- 执行顺序： 先 from ， 然后 where， 最后 select</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li>查询工资等于 5000 的员工姓名？</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>查询 SMITH 的工资？</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">'SMITH'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>找出工资 大于，大于等于，小于， 小于等于 3000 的员工?</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&gt;</span><span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&gt;=</span><span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&lt;</span><span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&lt;=</span><span class="token number">3000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="4"><li>找出工资不等于 3000 的员工?</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&lt;&gt;</span><span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">!=</span><span class="token number">3000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="5"><li>找出工资在 1100 和 3000 之间的员工， 包括 1100 和 3000</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&gt;=</span><span class="token number">1100</span> <span class="token operator">and</span> sal<span class="token operator">&lt;=</span><span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token comment">-- (闭区间， 左小右大)</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">between</span> <span class="token number">1100</span> <span class="token operator">and</span> <span class="token number">3000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><em>注意： between....and 不但可以用在数字上，还可以用在字符串上（几乎用不到）</em></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">between</span> <span class="token string">'A'</span> <span class="token operator">and</span> <span class="token string">'B'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="6"><li>找出哪些人没有津贴？ 在数据库当中 NULL 不是一个值， 代表什么都没有，为空。
空不是一个值， 不能用等号衡量，必须使用 <code>is null</code> 或者 <code>is not nul</code></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 找出哪些人津贴为NULl？</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token comment">-- 找出哪些人津贴不为NUll？</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="7"><li>找出哪些人没有津贴（NUll 和 0）</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span>  <span class="token boolean">null</span> <span class="token operator">or</span> comm<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="8"><li>找出员工岗位是 MANAGER 或者 SALESMAN 的员工</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job<span class="token operator">=</span><span class="token string">'MANAGER'</span> <span class="token operator">or</span> job<span class="token operator">=</span><span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="9"><li>and 和 or 联合使用：找出薪资大于 1000 的员工并且部门编号是 20 或者 30 的部门员工</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&gt;</span><span class="token number">1000</span> <span class="token operator">and</span> <span class="token punctuation">(</span>deptno<span class="token operator">=</span><span class="token number">20</span> <span class="token operator">or</span> deptno<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>当运算符的优先级不确定的时候加小括号</em></p> <ol start="10"><li>in 操作符(等同于 or)， 找出工作岗位是 MANAGER 和 SALESMAN 的员工?</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 等价于下边的or</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job<span class="token operator">=</span><span class="token string">'MANAGER'</span> <span class="token operator">or</span> job<span class="token operator">=</span><span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><em>注意：in 后边的两个值表示的是具体的值， 而不是一个区间</em></p> <ol start="11"><li><p>not in 不在这几个值当中, 与 in 的用法相反</p></li> <li><p>like 模糊查询
（在模糊查询中， 必须掌握两个符号， 一个是 <code>%</code>， 一个是 <code>_</code>）
<code>%</code> 代表多个字符， <code>_</code>代表任意一个字符</p></li></ol> <ul><li>找出名字当中含有 o 的？</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%o%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>找出名字当中第二个字母是 A 的？</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'_A%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>找出名字中有下划线的（使用转义符\）？</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%\_%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>找出最后一个字母是 T 的</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%T'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_12-排序-升序-降序"><a href="#_12-排序-升序-降序" class="header-anchor">#</a> 12. 排序（升序， 降序）</h3> <p>语法格式：</p> <ul><li>select 字段 from 表名 order by 某个字段 asc(升序)|desc(降序)</li></ul> <blockquote><p><em>注意： 数据库默认是升序</em></p></blockquote> <ol><li>按照工资升序排， 找出员工和薪资</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>指定是升序还是降序？ asc 表示升序， desc 降序。</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li><p>案例：按照工资的降序排列， 当工资相同的时候再按照名字的升序排列？</p> <p><em>注意： 按多个字段排序的时候， 谁在前边， 谁的优先级越高，后边的字段排序，只有当前边的无法完成具体的排序时，才会执行后边的排序条件</em></p></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">,</span>ename <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li>也可以按列排序（直接使用列的序号， 不推荐使用）</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>where 混合 排序使用</li></ol> <ul><li>找出工作岗位是 SALESMAN 的员工，要求按薪资的降序排</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> job<span class="token operator">=</span><span class="token string">'SALESMAN'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>执行顺序：from ---- where --- select --- order by</em></p> <h3 id="_13-分组函数-多行处理"><a href="#_13-分组函数-多行处理" class="header-anchor">#</a> 13. 分组函数（多行处理）</h3> <ul><li><p>count 计数</p></li> <li><p>sum 求和</p></li> <li><p>avg 平均数</p></li> <li><p>max 最大值</p></li> <li><p>min 最小值</p> <p><em>所有的分组函数， 都是对一组数据进行操作的</em></p> <p>分组函数一共有 5 个。</p> <p>它的另一个名字：多行处理函数</p> <p>多行处理函数的特点： 处理多行， 最终输出的结果是一行</p></li></ul> <ol><li>对某个字段求和</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 求工资总和？</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 找出最高工资</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 找出最低工资</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 找出平均工资</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 找出总人数</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>注意：</strong></p> <p>分组函数自动忽略字段为 <code>NUll</code> 的数据</p> <p><strong>问题：</strong> 找出工资高于平均工资的员工？</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&gt;</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 上述语法报错：ERROR 1111 (HY000): Invalid use of group function</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>思考为啥报错：无效的使用了分组函数</p> <p>原因是：SQL 语句当中，分组函数不可直接使用在 where 字句中。 为什么？</p> <p>怎么解释：</p> <p>因为 group by 是在 where 执行之后才会执行</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 执行顺序是</span>
<span class="token keyword">select</span>        <span class="token number">5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">from</span>          <span class="token number">1</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">where</span>         <span class="token number">2</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">group</span> <span class="token keyword">by</span>      <span class="token number">3</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">having</span>        <span class="token number">4</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">order</span> <span class="token keyword">by</span>      <span class="token number">6</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>那么怎么处理这个需求： 找出工资高于平均工资的员工？</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 第1步：找出平均工资</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 第二步：找出高于平均工资的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> 上一步执行的结果
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>合并上边两步的操作，使用子查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><code>count(*)</code> 和 <code>count(某个具体的字段)</code> 他们有什么区别？</p> <ul><li><code>count(*)</code>: 是统计的总记录条数</li> <li><code>count(某个具体的字段)</code>:是统计当前这个字段不为NUll的数据总条数</li></ul></li> <li><p>分组函数也能组合使用</p></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_14-单行处理函数"><a href="#_14-单行处理函数" class="header-anchor">#</a> 14. 单行处理函数</h3> <p>输入一行， 输出一行</p> <p><strong>计算每个员工的年薪？</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token punctuation">(</span>sal<span class="token operator">+</span>comm<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span> yealsal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：sql 语句中，任何值和 NULL 运算， 结果都是 NULL</p> <p><strong>使用 ifnull() 空处理函数？</strong></p> <p>ifnull(可能为 NULL 的数据，被当做什么来处理)：属于单行处理函数</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token punctuation">(</span>sal<span class="token operator">+</span>ifnull<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span> yealsal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> ifnull<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span> yealsal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_15-分组查询-group-by-和-having"><a href="#_15-分组查询-group-by-和-having" class="header-anchor">#</a> 15. 分组查询(group by 和 having)</h3> <ul><li><code>group by</code>: 按照某个字段或者某些字段进行分组。</li> <li><code>having</code>：是对分组之后的数据进行再次过滤。</li></ul> <ol><li><strong>案例 ： 找出每个工作岗位的最高薪资</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job
<span class="token operator">+</span><span class="token comment">----------+-----------+</span>
<span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span> job       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-----------+</span>
<span class="token operator">|</span>  <span class="token number">3000.00</span> <span class="token operator">|</span> ANALYST   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1300.00</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2975.00</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1600.00</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-----------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="2"><li><strong>案例 ： 找出每个工作岗位的最高薪资,进行排序</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+-----------+</span>
<span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span> job       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-----------+</span>
<span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3000.00</span> <span class="token operator">|</span> ANALYST   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2975.00</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1600.00</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1300.00</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-----------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">注意</p> <p>1：分组函数一般都会和 group by 联合使用,这也是为什么会被称为分组函数的原因，并且任何分组函数（min，avg， max， sum， count）都是再 group by 语句执行结束之后才会执行的当一条 sql 语句中没有 group by 的话， 整张表的数据会自成一组</p> <p>2：<code>select ename,max(sal),job group by job;</code></p> <p>select 和 group by 一块使用时， 搜索的字段必须是 group by 分组后跟的字段 和 分组函数，不然上述语法在 Oracle 会报错</p></div> <p>规则：当一条查询语句中有 group by的话， select后面只能跟分组函数和参与分组的字段</p> <ol start="3"><li><strong>案例 ：每个岗位的平均工资</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> job<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+</span>
<span class="token operator">|</span> job       <span class="token operator">|</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+</span>
<span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">3000.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">1037.500000</span> <span class="token operator">|</span>
<span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">2758.333333</span> <span class="token operator">|</span>
<span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token number">5000.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">1400.000000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="4"><li><strong>多个字段能不能联合起来一块分组？</strong></li></ol> <p>案例：找出每个部门不同岗位的最高薪资。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> deptno<span class="token punctuation">,</span>job<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">,</span>job<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+-----------+-------------+</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> job       <span class="token operator">|</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-----------+-------------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">1300.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">2450.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token number">5000.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">3000.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span>  <span class="token number">950.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">2975.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span>  <span class="token number">950.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">2850.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">1400.000000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-----------+-------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="5"><li><strong>找出每个部门的最高薪资， 要求显示薪资大于 2900 的数据</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 第一步：找出每个部门的最高薪资</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2850.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token comment">-- 第二步：找出薪资大于2900的（以下sql执行效率低）</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2900</span> <span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token comment">-- 解决第二步的效率低的sql，使用where先过滤掉，能用where解决的，不要用having</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&gt;</span><span class="token number">2900</span> <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ol start="6"><li><strong>where 搞不定的，再用 having</strong>
需求：找出每个部门的平均薪资， 要求显示薪资大于 2000 的数据</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2000</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
<span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_16-总结一个完整的-dql-语句怎么写"><a href="#_16-总结一个完整的-dql-语句怎么写" class="header-anchor">#</a> 16.总结一个完整的 DQL 语句怎么写？</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>		<span class="token number">5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">from</span>		<span class="token number">1</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">where</span>		<span class="token number">2</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">group</span> <span class="token keyword">by</span>	<span class="token number">3</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">having</span>		<span class="token number">4</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">order</span> <span class="token keyword">by</span>	<span class="token number">6</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="遗留问题"><a href="#遗留问题" class="header-anchor">#</a> 遗留问题</h3> <ol><li>关于查询结果集的去重？</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- distinct去除重复记录，可以跟多个字段</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> job <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>统计岗位的数量</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- distinct去除重复记录，可以跟多个字段</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> job<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> job<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span>                   <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="第二天"><a href="#第二天" class="header-anchor">#</a> 第二天</h2> <h3 id="_1、连接查询"><a href="#_1、连接查询" class="header-anchor">#</a> 1、连接查询</h3> <h4 id="_1-1-什么是连接查询"><a href="#_1-1-什么是连接查询" class="header-anchor">#</a> 1.1 什么是连接查询？</h4> <p>实际开发中，大部分的情况下都不是从但表中查询数据，一般都是多张表联合查询取出最终的结果</p> <p>在实际开发中， 一般一个业务都会对应多张表， 比如学生和班级，起码两张表。</p> <p>也就是关系型数据库表</p> <h4 id="_1-2-表连接方式划分"><a href="#_1-2-表连接方式划分" class="header-anchor">#</a> 1.2 表连接方式划分：</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>  内连接：
      等值连接
      自连接
  外连接
      左外连接
      右外连接
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_1-3-在表的连接查询方面有一种现象称为-笛卡尔积"><a href="#_1-3-在表的连接查询方面有一种现象称为-笛卡尔积" class="header-anchor">#</a> 1.3 在表的连接查询方面有一种现象称为：笛卡尔积</h4> <p><code>笛卡尔积现象：当两张表进行连接查询的时候，没有任何条件进行限制，最后的查询结果就是两张表的乘积</code></p> <p>案例：找出每一个员工的部门名称，要求显示员工名和部门</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e<span class="token punctuation">,</span>dept d<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表别名有什么好处？</p> <p>第一：执行效率高</p> <p>第二：可读性好</p> <h4 id="_1-4-怎么避免笛卡尔积现象-当然是加条件进行过滤。"><a href="#_1-4-怎么避免笛卡尔积现象-当然是加条件进行过滤。" class="header-anchor">#</a> 1.4 怎么避免笛卡尔积现象？ 当然是加条件进行过滤。</h4> <p>思考： 避免笛卡尔积现象， 会减少记录的匹配次数吗？</p> <p>不会， 次数还是 56 次。 只不过显示的是有效记录。</p> <p>案例：找出每一个员工的部门名称，要求显示员工名和部门</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e<span class="token punctuation">,</span>dept d <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> dname      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="_1-5-内连接之等值连接-最大特点是-条件是等量关系。"><a href="#_1-5-内连接之等值连接-最大特点是-条件是等量关系。" class="header-anchor">#</a> 1.5 内连接之等值连接：最大特点是：条件是等量关系。</h4> <p>案例：查询每个员工的部门名称，要求显示员工名和部门名。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>SQL92:（太老，不用了）													
	<span class="token keyword">select</span> 
		e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
	<span class="token keyword">from</span>
		emp e<span class="token punctuation">,</span> dept d
	<span class="token keyword">where</span>
		e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>

SQL99：（常用的）
	<span class="token keyword">select</span> 
		e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
	<span class="token keyword">from</span>
		emp e
	<span class="token keyword">join</span>
		dept d
	<span class="token keyword">on</span>
		e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
		
SQL99语法结构更清晰一些：表的连接条件和后来的<span class="token keyword">where</span>条件分离了。

语法： <span class="token keyword">inner</span>可以省略的，带着<span class="token keyword">inner</span>目的是可读性好一些。
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		A
<span class="token keyword">inner</span> <span class="token keyword">join</span>
		B
	<span class="token keyword">on</span>
		连接条件
	<span class="token keyword">where</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> dname      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h4 id="_1-6、内连接之非等值连接-最大的特点是-连接条件中的关系是非等量关系。"><a href="#_1-6、内连接之非等值连接-最大的特点是-连接条件中的关系是非等量关系。" class="header-anchor">#</a> 1.6、内连接之非等值连接：最大的特点是：连接条件中的关系是非等量关系。</h4> <p>案例：找出每个员工的工资等级，要求显示员工名、工资、工资等级。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp e<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">5000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">1500.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> <span class="token number">1100.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span>  <span class="token number">950.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">1300.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> salgrade s<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+-------+-------+ </span>
<span class="token operator">|</span> GRADE <span class="token operator">|</span> LOSAL <span class="token operator">|</span> HISAL <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------+-------+</span>
<span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">700</span> <span class="token operator">|</span>  <span class="token number">1200</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">1201</span> <span class="token operator">|</span>  <span class="token number">1400</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>  <span class="token number">1401</span> <span class="token operator">|</span>  <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>  <span class="token number">2001</span> <span class="token operator">|</span>  <span class="token number">3000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span>  <span class="token number">3001</span> <span class="token operator">|</span>  <span class="token number">9999</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------+-------+</span>

<span class="token keyword">select</span> 
	e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade
<span class="token keyword">from</span>
	emp e
<span class="token keyword">join</span>
	salgrade s
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> grade <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">5000.00</span> <span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">1500.00</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> <span class="token number">1100.00</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span>  <span class="token number">950.00</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">1300.00</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h4 id="_1-7、自连接-最大的特点是-一张表看做两张表。自己连接自己。"><a href="#_1-7、自连接-最大的特点是-一张表看做两张表。自己连接自己。" class="header-anchor">#</a> 1.7、自连接：最大的特点是：一张表看做两张表。自己连接自己。</h4> <p>案例：找出每个员工的上级领导，要求显示员工名和对应的领导名。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>mgr <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
emp a 员工表
<span class="token operator">+</span><span class="token comment">-------+--------+------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> mgr  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7499</span> <span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT  <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7876</span> <span class="token operator">|</span> ADAMS  <span class="token operator">|</span> <span class="token number">7788</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+------+</span>
emp b 领导表
<span class="token operator">+</span><span class="token comment">-------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+</span>

员工的领导编号 <span class="token operator">=</span> 领导的员工编号

<span class="token keyword">select</span> 
	a<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'员工名'</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'领导名'</span>
<span class="token keyword">from</span>
	emp a
<span class="token keyword">inner</span> <span class="token keyword">join</span>
	emp b
<span class="token keyword">on</span>
	a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+--------+</span>
<span class="token operator">|</span> 员工名 <span class="token operator">|</span> 领导名 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> FORD   <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> KING   <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> KING   <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> KING   <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> JONES  <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> SCOTT  <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> JONES  <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> CLARK  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_1-8、外连接"><a href="#_1-8、外连接" class="header-anchor">#</a> 1.8、外连接？</h4> <p>什么是外连接，和内连接有什么区别？</p> <ul><li><p>内连接：
假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的记录查询出来，这就是内连接。</p> <p>AB两张表没有主副之分，两张表是平等的。</p></li> <li><p>外连接：
假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主表，一张表是副表，主要查询主表中的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，<strong>副表自动模拟出NULL与之匹配。</strong></p></li> <li><p>外连接的分类？</p> <p>左外连接（左连接）：表示左边的这张表是主表。</p> <p>右外连接（右连接）：表示右边的这张表是主表。</p></li></ul> <p>左连接有右连接的写法，右连接也会有对应的左连接的写法。</p> <p>案例：找出每个员工的上级领导？（所有员工必须全部查询出来。）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>emp a 员工表
<span class="token operator">+</span><span class="token comment">-------+--------+------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> mgr  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7499</span> <span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT  <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7876</span> <span class="token operator">|</span> ADAMS  <span class="token operator">|</span> <span class="token number">7788</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+------+</span>
emp b 领导表
<span class="token operator">+</span><span class="token comment">-------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+</span>

内连接：
<span class="token keyword">select</span> 
	a<span class="token punctuation">.</span>ename <span class="token string">'员工'</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>ename <span class="token string">'领导'</span>
<span class="token keyword">from</span>
	emp a
<span class="token keyword">join</span>
	emp b
<span class="token keyword">on</span>
	a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>

外连接：（左外连接<span class="token operator">/</span>左连接）  
<span class="token comment">// outer是可以省略的。</span>
<span class="token keyword">select</span> 
	a<span class="token punctuation">.</span>ename <span class="token string">'员工'</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>ename <span class="token string">'领导'</span>
<span class="token keyword">from</span>
	emp a
<span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span>
	emp b
<span class="token keyword">on</span>
	a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>

外连接：（右外连接<span class="token operator">/</span>右连接）
<span class="token comment">// outer可以省略。</span>
<span class="token keyword">select</span> 
	a<span class="token punctuation">.</span>ename <span class="token string">'员工'</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>ename <span class="token string">'领导'</span>
<span class="token keyword">from</span>
	emp b
<span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span>
	emp a
<span class="token keyword">on</span>
	a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+-------+</span>
<span class="token operator">|</span> 员工    <span class="token operator">|</span> 领导  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> FORD  <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> KING  <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> KING  <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> KING  <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> JONES <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> SCOTT <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> JONES <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> CLARK <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><p>外连接最重要的特点是：主表的数据无条件的全部查询出来。</p> <p>案例：找出哪个部门没有员工？</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>EMP表
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span> EMPNO <span class="token operator">|</span> ENAME  <span class="token operator">|</span> JOB       <span class="token operator">|</span> MGR  <span class="token operator">|</span> HIREDATE   <span class="token operator">|</span> SAL     <span class="token operator">|</span> COMM    <span class="token operator">|</span> DEPTNO <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span> <span class="token number">1980</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7499</span> <span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">20</span> <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>  <span class="token number">300.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>  <span class="token number">500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">02</span> <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">28</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span> <span class="token number">1400.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">09</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT  <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1987</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span> <span class="token number">5000.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">08</span> <span class="token operator">|</span> <span class="token number">1500.00</span> <span class="token operator">|</span>    <span class="token number">0.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7876</span> <span class="token operator">|</span> ADAMS  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7788</span> <span class="token operator">|</span> <span class="token number">1987</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">23</span> <span class="token operator">|</span> <span class="token number">1100.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span>  <span class="token number">950.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1982</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">23</span> <span class="token operator">|</span> <span class="token number">1300.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
DEPT
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME      <span class="token operator">|</span> LOC      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span> NEW YORK <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>

<span class="token keyword">select</span> 
	d<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">from</span>
	emp e
<span class="token keyword">right</span> <span class="token keyword">join</span>
	dept d
	e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno
<span class="token keyword">where</span>
	e<span class="token punctuation">.</span>empno <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+------------+--------+</span>
<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME      <span class="token operator">|</span> LOC    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+--------+</span>
<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+--------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h4 id="_1-9、三张表怎么连接查询"><a href="#_1-9、三张表怎么连接查询" class="header-anchor">#</a> 1.9、三张表怎么连接查询？</h4> <p>案例：找出每一个员工的部门名称以及工资等级。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>EMP e
<span class="token operator">+</span><span class="token comment">-------+--------+---------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7499</span> <span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT  <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">5000.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">1500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7876</span> <span class="token operator">|</span> ADAMS  <span class="token operator">|</span> <span class="token number">1100.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span>  <span class="token number">950.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">1300.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+---------+--------+</span>
DEPT d
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME      <span class="token operator">|</span> LOC      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span> NEW YORK <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
SALGRADE s
<span class="token operator">+</span><span class="token comment">-------+-------+-------+</span>
<span class="token operator">|</span> GRADE <span class="token operator">|</span> LOSAL <span class="token operator">|</span> HISAL <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------+-------+</span>
<span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">700</span> <span class="token operator">|</span>  <span class="token number">1200</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">1201</span> <span class="token operator">|</span>  <span class="token number">1400</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>  <span class="token number">1401</span> <span class="token operator">|</span>  <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>  <span class="token number">2001</span> <span class="token operator">|</span>  <span class="token number">3000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span>  <span class="token number">3001</span> <span class="token operator">|</span>  <span class="token number">9999</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------+-------+</span>

注意，解释一下：
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		A
	<span class="token keyword">join</span>
		B
	<span class="token keyword">join</span>
		C
	<span class="token keyword">on</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		
表示：A表和B表先进行表连接，连接之后A表继续和C表进行连接。

<span class="token keyword">select</span> 
	e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade
<span class="token keyword">from</span>
	emp e
<span class="token keyword">join</span>
	dept d
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno
<span class="token keyword">join</span>
	salgrade s
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+------------+-------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> dname      <span class="token operator">|</span> grade <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+-------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><p>案例：找出每一个员工的部门名称、工资等级、以及上级领导。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 
		e<span class="token punctuation">.</span>ename <span class="token string">'员工'</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade<span class="token punctuation">,</span>e1<span class="token punctuation">.</span>ename <span class="token string">'领导'</span>
	<span class="token keyword">from</span>
		emp e
	<span class="token keyword">join</span>
		dept d
	<span class="token keyword">on</span>
		e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno
	<span class="token keyword">join</span>
		salgrade s
	<span class="token keyword">on</span>
		e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal
	<span class="token keyword">left</span> <span class="token keyword">join</span>
		emp e1
	<span class="token keyword">on</span>
		e<span class="token punctuation">.</span>mgr <span class="token operator">=</span> e1<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+------------+-------+-------+</span>
<span class="token operator">|</span> 员工    <span class="token operator">|</span> dname    <span class="token operator">|</span> grade  <span class="token operator">|</span>  领导  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+-------+-------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span> FORD  <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span> KING  <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span> KING  <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span> KING  <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span> JONES <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span> SCOTT <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> SALES      <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span> BLAKE <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span> JONES <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span> CLARK <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+-------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_2、子查询"><a href="#_2、子查询" class="header-anchor">#</a> 2、子查询</h3> <h4 id="_2-1、什么是子查询-子查询都可以出现在哪里"><a href="#_2-1、什么是子查询-子查询都可以出现在哪里" class="header-anchor">#</a> 2.1、什么是子查询？子查询都可以出现在哪里？</h4> <p>​	<strong>select语句当中嵌套select语句，被嵌套的select语句是子查询。</strong>
​	子查询可以出现在哪里？</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>		<span class="token keyword">select</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token keyword">from</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token keyword">where</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_2-2、where子句中使用子查询"><a href="#_2-2、where子句中使用子查询" class="header-anchor">#</a> 2.2、where子句中使用子查询</h4> <p>案例：找出高于平均薪资的员工信息。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//错误的写法，where后面不能直接使用分组函数。</span>

第一步：找出平均薪资
	<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">-------------+</span>
	<span class="token operator">|</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>    <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">-------------+</span>
	<span class="token operator">|</span> <span class="token number">2073.214286</span> <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">-------------+</span>
第二步：<span class="token keyword">where</span>过滤
	<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">2073.214286</span><span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">-------+-------+-----------+------+------------+---------+------+--------+</span>
	<span class="token operator">|</span> EMPNO <span class="token operator">|</span> ENAME <span class="token operator">|</span> JOB       <span class="token operator">|</span> MGR  <span class="token operator">|</span> HIREDATE   <span class="token operator">|</span> SAL     <span class="token operator">|</span> COMM <span class="token operator">|</span> DEPTNO <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">-------+-------+-----------+------+------------+---------+------+--------+</span>
	<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">02</span> <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7839</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">09</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1987</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING  <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span> <span class="token number">5000.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD  <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">-------+-------+-----------+------+------------+---------+------+--------+</span>
第一步和第二步合并：
	<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="_2-3、from后面嵌套子查询"><a href="#_2-3、from后面嵌套子查询" class="header-anchor">#</a> 2.3、from后面嵌套子查询</h4> <p>案例：找出每个部门平均薪水的等级。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>第一步：找出每个部门平均薪水（按照部门编号分组，求sal的平均值）
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> avgsal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> avgsal      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2916.666667</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2175.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">1566.666667</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+</span>
第二步：将以上的查询结果当做临时表t，让t表和salgrade s表连接，条件是：t<span class="token punctuation">.</span>avgsal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal
<span class="token keyword">select</span> 
	t<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade
<span class="token keyword">from</span>
	<span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> avgsal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span> t
<span class="token keyword">join</span>
	salgrade s
<span class="token keyword">on</span>
	t<span class="token punctuation">.</span>avgsal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+-------------+-------+</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> avgsal      <span class="token operator">|</span> grade <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+-------+</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">1566.666667</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2916.666667</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2175.000000</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>案例：找出每个部门平均的薪水等级。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>第一步：找出每个员工的薪水等级。
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade <span class="token keyword">from</span> emp e <span class="token keyword">join</span> salgrade s <span class="token keyword">on</span> e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+-------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> deptno <span class="token operator">|</span> grade <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+-------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">5000.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">1500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> <span class="token number">1100.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span>  <span class="token number">950.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">1300.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+-------+</span>
第二步：基于以上结果，继续按照deptno分组，求grade平均值。
<span class="token keyword">select</span> 
	e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>grade<span class="token punctuation">)</span>
<span class="token keyword">from</span> 
	emp e 
<span class="token keyword">join</span> 
	salgrade s 
<span class="token keyword">on</span> 
	e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal
<span class="token keyword">group</span> <span class="token keyword">by</span>
	e<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+--------------+</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> <span class="token function">avg</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>grade<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>       <span class="token number">3.6667</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>       <span class="token number">2.8000</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>       <span class="token number">2.5000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h4 id="_2-4、在select后面嵌套子查询。"><a href="#_2-4、在select后面嵌套子查询。" class="header-anchor">#</a> 2.4、在select后面嵌套子查询。</h4> <p>案例：找出每个员工所在的部门名称，要求显示员工名和部门名。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 
	e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span>
	emp e
<span class="token keyword">join</span>
	dept d
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>

<span class="token keyword">select</span> 
	e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> dept d <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">)</span> <span class="token keyword">as</span> dname 
<span class="token keyword">from</span> 
	emp e<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+------------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> dname      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS  <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_3、union-可以将查询结果集相加"><a href="#_3、union-可以将查询结果集相加" class="header-anchor">#</a> 3、union （可以将查询结果集相加）</h3> <p>案例：找出工作岗位是SALESMAN和MANAGER的员工？</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>第一种：<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span> <span class="token operator">or</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>
第二种：<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span><span class="token string">'SALESMAN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>

第三种：<span class="token keyword">union</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span>
<span class="token keyword">union</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>两张不相干的表中的数据拼接在一起显示？</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename <span class="token keyword">from</span> emp
<span class="token keyword">union</span>
<span class="token keyword">select</span> dname <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span> ename      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span> SMITH      <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN      <span class="token operator">|</span>
<span class="token operator">|</span> WARD       <span class="token operator">|</span>
<span class="token operator">|</span> JONES      <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN     <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE      <span class="token operator">|</span>
<span class="token operator">|</span> CLARK      <span class="token operator">|</span>
<span class="token operator">|</span> SCOTT      <span class="token operator">|</span>
<span class="token operator">|</span> KING       <span class="token operator">|</span>
<span class="token operator">|</span> TURNER     <span class="token operator">|</span>
<span class="token operator">|</span> ADAMS      <span class="token operator">|</span>
<span class="token operator">|</span> JAMES      <span class="token operator">|</span>
<span class="token operator">|</span> FORD       <span class="token operator">|</span>
<span class="token operator">|</span> MILLER     <span class="token operator">|</span>
<span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> OPERATIONS <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">union</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> dname <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
ERROR <span class="token number">1222</span> <span class="token punctuation">(</span><span class="token number">21000</span><span class="token punctuation">)</span>: The used <span class="token keyword">SELECT</span> statements have a different number <span class="token keyword">of</span> <span class="token keyword">columns</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_4、limit"><a href="#_4、limit" class="header-anchor">#</a> 4、limit</h3> <p>(重点中的重点，以后分页查询全靠它了。)</p> <p>limit是mysql特有的，其他数据库中没有，不通用。（Oracle中有一个相同的机制，叫做rownum）</p> <p>limit取结果集中的部分数据，这是它的作用。</p> <h4 id="_4-1、语法机制"><a href="#_4-1、语法机制" class="header-anchor">#</a> 4.1、语法机制：</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	<span class="token keyword">limit</span> startIndex<span class="token punctuation">,</span> length
	<span class="token comment">#	startIndex表示起始位置，从0开始，0表示第一条数据。</span>
	<span class="token comment">#	length表示取几个</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>案例：取出工资前5名的员工（思路：降序取前5个）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span>
	取前<span class="token number">5</span>个：
		<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span>
		<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_4-2、limit是sql语句最后执行的一个环节"><a href="#_4-2、limit是sql语句最后执行的一个环节" class="header-anchor">#</a> 4.2、limit是sql语句最后执行的一个环节：</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>		<span class="token number">5</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">from</span>			<span class="token number">1</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>		
	<span class="token keyword">where</span>			<span class="token number">2</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	
	<span class="token keyword">group</span> <span class="token keyword">by</span>		<span class="token number">3</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">having</span>		<span class="token number">4</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">order</span> <span class="token keyword">by</span>		<span class="token number">6</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">limit</span>			<span class="token number">7</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_4-3、案例-找出工资排名在第4到第9名的员工"><a href="#_4-3、案例-找出工资排名在第4到第9名的员工" class="header-anchor">#</a> 4.3、案例：找出工资排名在第4到第9名的员工？</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">--------+---------+</span>
	<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">--------+---------+</span>
	<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span>
	<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span>
	<span class="token operator">|</span> CLARK  <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>
	<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>
	<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">1500.00</span> <span class="token operator">|</span>
	<span class="token operator">|</span> MILLER <span class="token operator">|</span> <span class="token number">1300.00</span> <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">--------+---------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_4-4、通用的标准分页sql"><a href="#_4-4、通用的标准分页sql" class="header-anchor">#</a> 4.4、通用的标准分页sql？</h4> <p>每页显示3条记录：</p> <p>第1页：0, 3</p> <p>第2页：3, 3</p> <p>第3页：6, 3</p> <p>第4页：9, 3</p> <p>第5页：12, 3</p> <p>每页显示pageSize条记录：</p> <p>第pageNo页：(pageNo - 1) * pageSize, pageSize</p> <p>pageSize是什么？是每页显示多少条记录</p> <p>pageNo是什么？显示第几页</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>java代码<span class="token punctuation">{</span>
	<span class="token keyword">int</span> pageNo <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 页码是2</span>
	<span class="token keyword">int</span> pageSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 每页显示10条</span>
	limit <span class="token punctuation">(</span>pageNo <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">,</span> pageSize<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5、创建表"><a href="#_5、创建表" class="header-anchor">#</a> 5、创建表：</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>建表语句的语法格式：
	<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
		字段名<span class="token number">1</span> 数据类型<span class="token punctuation">,</span>
		字段名<span class="token number">2</span> 数据类型<span class="token punctuation">,</span>
		字段名<span class="token number">3</span> 数据类型<span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><p>关于MySQL当中字段的数据类型？以下只说常见的</p> <table><thead><tr><th>NAME</th> <th>DESC</th></tr></thead> <tbody><tr><td>int</td> <td>整数型(java中的int)</td></tr> <tr><td>bigint</td> <td>长整型(java中的long)</td></tr> <tr><td>float</td> <td>浮点型(java中的float double)</td></tr> <tr><td>char</td> <td>定长字符串(String)</td></tr> <tr><td>varchar</td> <td>可变长字符串(StringBuffer/StringBuilder)</td></tr> <tr><td>date</td> <td>日期类型 （对应Java中的java.sql.Date类型）</td></tr> <tr><td>BLOB</td> <td>二进制大对象（存储图片、视频等流媒体信息） Binary Large OBject （对应java中的Object）</td></tr> <tr><td>CLOB</td> <td>字符大对象（存储较大文本，比如，可以存储4G的字符串。） Character Large OBject（对应java中的Object）</td></tr> <tr><td>....</td> <td></td></tr></tbody></table></li> <li><p>char和varchar怎么选择？
在实际的开发中，当某个字段中的数据长度不发生改变的时候，是定长的，例如：性别、生日等都是采用char。
当一个字段的数据长度不确定，例如：简介、姓名等都是采用varchar。</p></li> <li><p>BLOB和CLOB类型的使用？</p> <table><thead><tr><th>电影表 T_MOVIE</th> <th></th> <th></th> <th></th> <th></th></tr></thead> <tbody><tr><td>id(int)</td> <td>name(varchar)</td> <td>playtime(date/char)</td> <td>haibao(BLOB)</td> <td>history(CLOB)</td></tr> <tr><td>1</td> <td>蜘蛛侠</td> <td></td> <td></td> <td></td></tr> <tr><td>2</td> <td>......</td> <td></td> <td></td> <td></td></tr></tbody></table></li> <li><p>表名在数据库当中一般建议以：t_或者tbl_开始。</p></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建学生表：
	学生信息包括：
		学号、姓名、性别、班级编号、生日
		学号：<span class="token keyword">bigint</span>
		姓名：<span class="token keyword">varchar</span>
		性别：<span class="token keyword">char</span>
		班级编号：<span class="token keyword">int</span>
		生日：<span class="token keyword">char</span>
		
<span class="token keyword">create</span> <span class="token keyword">table</span> t_student<span class="token punctuation">(</span>
	<span class="token keyword">no</span> <span class="token keyword">bigint</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	classno <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	birth <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_6、insert语句插入数据"><a href="#_6、insert语句插入数据" class="header-anchor">#</a> 6、insert语句插入数据</h3> <p>​	语法格式：
​		<strong>insert into 表名(字段名1,字段名2,字段名3,....) values(值1,值2,值3,....);</strong>
​		要求：字段的数量和值的数量相同，并且数据类型要对应相同。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> t_student<span class="token punctuation">(</span><span class="token keyword">no</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>classno<span class="token punctuation">,</span>birth<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'gaosan1ban'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 ERROR <span class="token number">1136</span> <span class="token punctuation">(</span><span class="token number">21</span>S01<span class="token punctuation">)</span>: <span class="token keyword">Column</span> count doesn<span class="token string">'t match value count at row 1;

insert into t_student(no,name,sex,classno,birth) values(1,'</span>zhangsan<span class="token string">','</span><span class="token number">1</span><span class="token string">','</span>gaosan1ban<span class="token string">', '</span><span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name     <span class="token operator">|</span> sex  <span class="token operator">|</span> classno    <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosan1ban <span class="token operator">|</span> <span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student<span class="token punctuation">(</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>classno<span class="token punctuation">,</span>birth<span class="token punctuation">,</span><span class="token keyword">no</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'lisi'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'gaosan1ban'</span><span class="token punctuation">,</span> <span class="token string">'1950-10-12'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name     <span class="token operator">|</span> sex  <span class="token operator">|</span> classno    <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosan1ban <span class="token operator">|</span> <span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosan1ban <span class="token operator">|</span> <span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'wangwu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 除name字段之外，剩下的所有字段自动插入NULL。</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name     <span class="token operator">|</span> sex  <span class="token operator">|</span> classno    <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosan1ban <span class="token operator">|</span> <span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosan1ban <span class="token operator">|</span> <span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> wangwu   <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student<span class="token punctuation">(</span><span class="token keyword">no</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name     <span class="token operator">|</span> sex  <span class="token operator">|</span> classno    <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosan1ban <span class="token operator">|</span> <span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosan1ban <span class="token operator">|</span> <span class="token number">1950</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> wangwu   <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_student<span class="token punctuation">;</span> <span class="token comment">// 当这个表存在的话删除。</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_student<span class="token punctuation">(</span>
	<span class="token keyword">no</span> <span class="token keyword">bigint</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">,</span>
	classno <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	birth <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+---------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name     <span class="token operator">|</span> sex  <span class="token operator">|</span> classno <span class="token operator">|</span> birth <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+---------+-------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+---------+-------+</span>

需要注意的地方：
	当一条<span class="token keyword">insert</span>语句执行成功之后，表格当中必然会多一行记录。
	即使多的这一行记录当中某些字段是<span class="token boolean">NULL</span>，后期也没有办法在执行
	<span class="token keyword">insert</span>语句插入数据了，只能使用<span class="token keyword">update</span>进行更新。

<span class="token comment">// 字段可以省略不写，但是后面的value对数量和顺序都有要求。</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'0'</span><span class="token punctuation">,</span><span class="token string">'gaosan2ban'</span><span class="token punctuation">,</span><span class="token string">'1986-10-23'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name     <span class="token operator">|</span> sex  <span class="token operator">|</span> classno    <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> jack     <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> gaosan2ban <span class="token operator">|</span> <span class="token number">1986</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">23</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'0'</span><span class="token punctuation">,</span><span class="token string">'gaosan2ban'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ERROR 1136 (21S01): Column count doesn't match value count at row 1</span>

<span class="token comment">// 一次插入多行数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student
	<span class="token punctuation">(</span><span class="token keyword">no</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>classno<span class="token punctuation">,</span>birth<span class="token punctuation">)</span> 
<span class="token keyword">values</span>
	<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'rose'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'gaosi2ban'</span><span class="token punctuation">,</span><span class="token string">'1952-12-14'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'laotie'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'gaosi2ban'</span><span class="token punctuation">,</span><span class="token string">'1955-12-14'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name     <span class="token operator">|</span> sex  <span class="token operator">|</span> classno    <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> jack     <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> gaosan2ban <span class="token operator">|</span> <span class="token number">1986</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">23</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> rose     <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosi2ban  <span class="token operator">|</span> <span class="token number">1952</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">14</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> laotie   <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> gaosi2ban  <span class="token operator">|</span> <span class="token number">1955</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">14</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------+------------+------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br></div></div><h3 id="_7、表的复制"><a href="#_7、表的复制" class="header-anchor">#</a> 7、表的复制</h3> <p>​	语法：
​		<strong>create table 表名 as select语句;</strong>
​		将查询结果当做表创建出来。</p> <h3 id="_8、将查询结果插入到一张表中"><a href="#_8、将查询结果插入到一张表中" class="header-anchor">#</a> 8、将查询结果插入到一张表中？</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> dept1 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept1<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
	<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME      <span class="token operator">|</span> LOC      <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
	<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span> NEW YORK <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span> NEW YORK <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_9、修改数据-update"><a href="#_9、修改数据-update" class="header-anchor">#</a> 9、修改数据：update</h3> <p>语法格式：
<strong>update 表名 set 字段名1=值1,字段名2=值2... where 条件;</strong></p> <p>注意：没有条件整张表数据全部更新。</p> <p>案例：将部门10的LOC修改为SHANGHAI，将部门名称修改为RENSHIBU</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>update dept1 <span class="token builtin class-name">set</span> loc <span class="token operator">=</span> <span class="token string">'SHANGHAI'</span>, dname <span class="token operator">=</span> <span class="token string">'RENSHIBU'</span> where deptno <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from dept1<span class="token punctuation">;</span>
+--------+------------+----------+
<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME      <span class="token operator">|</span> LOC      <span class="token operator">|</span>
+--------+------------+----------+
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> RENSHIBU   <span class="token operator">|</span> SHANGHAI <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> RENSHIBU   <span class="token operator">|</span> SHANGHAI <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
+--------+------------+----------+

更新所有记录
	update dept1 <span class="token builtin class-name">set</span> loc <span class="token operator">=</span> <span class="token string">'x'</span>, dname <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">;</span>
	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from dept1<span class="token punctuation">;</span>
	+--------+-------+------+
	<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME <span class="token operator">|</span> LOC  <span class="token operator">|</span>
	+--------+-------+------+
	<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> y     <span class="token operator">|</span> x    <span class="token operator">|</span>
	+--------+-------+------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_10、删除数据"><a href="#_10、删除数据" class="header-anchor">#</a> 10、删除数据？</h3> <p>​	语法格式：</p> <p>​		<strong>delete from 表名 where 条件;</strong></p> <p>​	注意：没有条件全部删除。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>删除<span class="token number">10</span>部门数据？
	<span class="token keyword">delete</span> <span class="token keyword">from</span> dept1 <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

删除所有记录？
	<span class="token keyword">delete</span> <span class="token keyword">from</span> dept1<span class="token punctuation">;</span>

怎么删除大表中的数据？（重点）
	<span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span> <span class="token comment">// 表被截断，不可回滚。永久丢失。</span>
删除表？
	<span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span> <span class="token comment">// 这个通用。</span>
	<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> 表名<span class="token punctuation">;</span> <span class="token comment">// oracle不支持这种写法。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_11、对于表结构的修改"><a href="#_11、对于表结构的修改" class="header-anchor">#</a> 11、对于表结构的修改</h3> <p>这里不讲了，大家使用工具完成即可，因为在实际开发中表一旦设计好之后，对表结构的修改是很少的，</p> <p>修改表结构就是对之前的设计进行了否定，即使需要修改表结构，我们也可以直接使用工具操作。</p> <p>修改表结构的语句不会出现在Java代码当中。出现在java代码当中的sql包括：insert delete update select（这些都是表中的数据操作。）</p> <p>增删改查有一个术语：CRUD操作
Create（增） Retrieve（检索） Update（修改） Delete（删除）</p> <h3 id="_12、约束-constraint"><a href="#_12、约束-constraint" class="header-anchor">#</a> 12、约束(Constraint)</h3> <h4 id="_12-1、什么是约束-常见的约束有哪些呢"><a href="#_12-1、什么是约束-常见的约束有哪些呢" class="header-anchor">#</a> 12.1、什么是约束？常见的约束有哪些呢？</h4> <p>在创建表的时候，可以给表的字段添加相应的约束，添加约束的目的是为了保证表中数据的合法性、有效性、完整性。
常见的约束有哪些呢？
​		<strong>非空约束(not null)</strong>：约束的字段不能为NULL</p> <p>​		<strong>唯一约束(unique)</strong>：约束的字段不能重复</p> <p>​		<strong>主键约束(primary key)</strong>：约束的字段既不能为NULL，也不能重复（简称PK）</p> <p>​		<strong>外键约束(foreign key)</strong>：...（简称FK）</p> <p>​		<strong>检查约束(check)</strong>：注意Oracle数据库有check约束，但是mysql没有，目前mysql不支持该约束。</p> <h4 id="_12-2、非空约束-not-null"><a href="#_12-2、非空约束-not-null" class="header-anchor">#</a> 12.2、非空约束 not null</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
	<span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
		id <span class="token keyword">int</span><span class="token punctuation">,</span>
		username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
		password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>password<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ERROR <span class="token number">1364</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Field <span class="token string">'username'</span> doesn<span class="token string">'t have a default value
	
	insert into t_user(id,username,password) values(1,'</span>lisi<span class="token string">','</span><span class="token number">123</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="第三天"><a href="#第三天" class="header-anchor">#</a> 第三天</h2> <h3 id="_1、约束"><a href="#_1、约束" class="header-anchor">#</a> 1、约束</h3> <h4 id="_1-1、唯一性约束-unique"><a href="#_1-1、唯一性约束-unique" class="header-anchor">#</a> 1.1、唯一性约束(unique)</h4> <ul><li><p>唯一性约束修饰的字段具有唯一性，不能重复。但可以为null。</p></li> <li><p>案例：给某一列添加unique</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
 	id <span class="token keyword">int</span><span class="token punctuation">,</span>
	username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">unique</span>  <span class="token comment">//列级约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zhangsan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'zhangsan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">//出现编译错误，唯一性约束，该字段与上一行字段重复，但可以为null！</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span> : <span class="token keyword">Duplicate</span> entry <span class="token string">'zhangsan'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'username'</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <ul><li><p>案例：给两个列或者多个列添加unique</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span>
    usercode <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">unique</span><span class="token punctuation">(</span>usercode<span class="token punctuation">,</span>username<span class="token punctuation">)</span>  <span class="token comment">//多个字段联合起来添加一个约束unique 【表级约束】</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'111'</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'111'</span><span class="token punctuation">,</span><span class="token string">'ls'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'222'</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'111'</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//出现编译错误！</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span> : <span class="token keyword">Duplicate</span> entry <span class="token string">'111-zs'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'usercode'</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_suer<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span>
    usercode <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">unique</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'111'</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'111'</span><span class="token punctuation">,</span><span class="token string">'ls'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span> : <span class="token keyword">Duplicate</span> entry <span class="token string">'111'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'usercode'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li> <li><p>注意：not null约束只有列级约束，没有表级约束。</p></li></ul> <h4 id="_1-2、主键约束"><a href="#_1-2、主键约束" class="header-anchor">#</a> 1.2、主键约束</h4> <ul><li><p>怎么给一张表添加主键约束呢？</p> <div class="language-SQL line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>  <span class="token comment">//列级约束</span>
  username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">,</span><span class="token string">'zs@123.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'ls'</span><span class="token punctuation">,</span><span class="token string">'ls@123.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'ww'</span><span class="token punctuation">,</span><span class="token string">'ww@123.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> username <span class="token operator">|</span> email       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs       <span class="token operator">|</span> zs<span class="token variable">@123.com</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> ls       <span class="token operator">|</span> ls<span class="token variable">@123.com</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> ww       <span class="token operator">|</span> ww<span class="token variable">@123.com</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+----------+-------------+</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'jack@123.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">-- 出现编译错误，主键约束，不能为null也不能重复！</span>
ERROR <span class="token number">1364</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span> : Field <span class="token string">'id'</span> doesn't have a <span class="token keyword">default</span> <span class="token keyword">value</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></li></ul> <p>根据以上的测试得出：id是主键，因为添加了主键约束，主键字段中的数据不能为null，也不能重复。</p> <p>主键的特点：不能为null，也不能重复。</p> <ul><li><p>主键相关的术语？</p> <p>主键约束 ：<strong>primary key</strong></p> <p>主键字段 : id字段添加primary key之后，id叫做主键字段</p> <p>主键值 ：id字段中的每一个值都是主键值。</p></li> <li><p>主键有什么作用？</p> <p>根据主键字段的字段数量来划分：</p> <p><strong>单一主键 (推荐的，常用的。)</strong></p> <p>复合主键(多个字段联合起来添加一个主键约束) (复合主键不建议使用，因为复合主键违背三范式。)</p> <p>根据主键性质来划分：</p> <p>自然主键 ：主键值最好就是一个和业务没有任何关系的自然数。(这种方式是推荐的)</p> <p>业务主键 : 主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键、拿着身份证号做为主键。(不推荐使用)</p> <p>​             最好不要拿着和业务挂钩的字段做为主键。因为以后的业务一旦发生改变的时候，主键也可能需要随着</p> <p>​			 发生变化，但有的时候没有办法变化，因为变化可能会导致主键重复。</p></li> <li><p>一张表的主键约束只能有1个。(必须记住)</p></li> <li><p>使用表级约束方式定义主键：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
  id <span class="token keyword">int</span><span class="token punctuation">,</span>
  username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'ls'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'ws'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'cs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'cx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//出现编译错误！</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span> : <span class="token keyword">Duplicate</span> entry <span class="token string">'4'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'PRIMARY'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>以下内容是演示一下复合主键，不需要掌握：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span>
	username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>username<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">insert</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>mysql提供主键值自增：(非常重要。)</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
  id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>  <span class="token comment">//id字段自动维护一个自增的数字，从1开始，以1递增。</span>
  username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'f'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>提示：Oracle当中也提供了一个自增机制，叫做：序列(sequence)对象。</p></li></ul> <p>​</p> <h4 id="_1-3、外键约束"><a href="#_1-3、外键约束" class="header-anchor">#</a> 1.3、外键约束</h4> <ul><li><p>关于外键约束的相关术语：</p> <p>外键约束：foreign key</p> <p>外键字段：添加有外键约束的字段</p> <p>外键值：外键字段中的每一个值。</p></li> <li><p>业务背景：</p> <p>请设计数据库表，用来维护学生和班级的信息？</p> <ul><li><p><strong>第一种方案</strong>：一张表存储所有数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">no</span><span class="token punctuation">(</span>pk<span class="token punctuation">)</span>     name   classno     classname
<span class="token comment">-----------------------------------------------------------</span>
 <span class="token number">1</span>         zs1    <span class="token number">101</span>         高三<span class="token number">1</span>班         
 <span class="token number">2</span>         zs2    <span class="token number">101</span>         高三<span class="token number">1</span>班 
 <span class="token number">3</span>         zs3    <span class="token number">102</span>         高三<span class="token number">2</span>班 
 <span class="token number">4</span>         zs4    <span class="token number">102</span>         高三<span class="token number">2</span>班
 <span class="token number">5</span>         s5     <span class="token number">102</span>        	高三<span class="token number">2</span>班 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>缺点：冗余。【不推荐】</p></li> <li><p><strong>第二种方案</strong>：两张表(班级表和学生表)</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span> t_class 班级表 <span class="token punctuation">]</span>
    
cno<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>         cname
<span class="token comment">-------------------------------------------------------------</span>
<span class="token number">101</span>           河南省平顶山市舞钢市垭口一高高三<span class="token number">1</span>班 
<span class="token number">102</span>           河南省平顶山市舞钢市垭口一高高三<span class="token number">2</span>班 

<span class="token punctuation">[</span> t_student 学生表 <span class="token punctuation">]</span>

sno<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>        sname          classno<span class="token punctuation">(</span>该字段添加外键约束fk<span class="token punctuation">)</span>
<span class="token comment">-----------------------------------------------------------</span>
<span class="token number">1</span>              zs1                  <span class="token number">101</span>
<span class="token number">2</span>              zs2                  <span class="token number">101</span>
<span class="token number">3</span>              zs3                  <span class="token number">102</span>
<span class="token number">4</span>              zs4                  <span class="token number">102</span>
<span class="token number">5</span>              zs5                  <span class="token number">102</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>将以上表的建表语句写出来：</p> <p>t_student中的classno字段引用t_class表中的cno字段，此时t_student表叫做子表。t_class表叫做父表。</p> <p>删除数据的时候，先删除子表，再删除父表。</p> <p>添加数据的时候，先添加父表，再添加子表。</p> <p>创建表的时候，先创建父表，再创建子表。</p> <p>删除表的时候，先删除子表，再删除父表。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_student<span class="token punctuation">;</span>
 <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_class<span class="token punctuation">;</span>
 <span class="token keyword">create</span> <span class="token keyword">table</span> t_class<span class="token punctuation">(</span>
       cno <span class="token keyword">int</span><span class="token punctuation">,</span>
       cname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
   
<span class="token keyword">create</span> <span class="token keyword">table</span> t_student<span class="token punctuation">(</span>
  sno <span class="token keyword">int</span><span class="token punctuation">,</span>
	sname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	classno <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>classno<span class="token punctuation">)</span> <span class="token keyword">references</span> t_class<span class="token punctuation">(</span>cno<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_class <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token string">'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_class <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token string">'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zs1'</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'zs2'</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'zs3'</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'zs4'</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'zs5'</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'zs6'</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_class<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'lisi'</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//编译错误，引用的103，父表中没有该字段！</span>
ERROR <span class="token number">1452</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span> : Cannot <span class="token keyword">add</span> <span class="token operator">or</span> <span class="token keyword">update</span> a child <span class="token keyword">row</span> :aforeign <span class="token keyword">key</span> <span class="token keyword">constraint</span> fails <span class="token punctuation">(</span>mydbtest <span class="token keyword">INT</span> YT<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div></li></ul></li> <li><p>外键值可以为NULL？</p> <p>外键可以为null。</p></li> <li><p>外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？</p> <p>注意：被引用的字段不一定是主键，但至少是具有unique约束，具有唯一性，不可重复！</p></li></ul> <h3 id="_2、存储引擎"><a href="#_2、存储引擎" class="header-anchor">#</a> 2、存储引擎？</h3> <h4 id="_2-1、完整的建表语句"><a href="#_2-1、完整的建表语句" class="header-anchor">#</a> 2.1、完整的建表语句</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>t_x<span class="token punctuation">`</span> <span class="token punctuation">(</span>
    <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：在MySQL当中，凡是标识符使用飘号括起来的。最好别用，不通用。</p> <p>建表的时候可以指定存储引擎，也可以指定字符集。</p> <p>mysql默认使用的存储引擎是InnoDB方式。</p> <p>默认采用的字符集是UTF-8。</p> <h4 id="_2-2、什么是存储引擎呢"><a href="#_2-2、什么是存储引擎呢" class="header-anchor">#</a> 2.2、什么是存储引擎呢？</h4> <p>存储引擎这个名字只有在mysql中存在。(Oracle中有对应的机制，但不叫做存储引擎。Oracle中没有特殊的名字，就是&quot;表的存储方式&quot;)</p> <div class="language- extra-class"><pre><code>mysql支持很多存储引擎，每个存储引擎都对应了一种不同的存储方式。
每一个存储引擎都有自己的优缺点，需要在合适的时机选择合适的存储引擎。
</code></pre></div><h4 id="_2-3、查看当前mysql支持的存储引擎"><a href="#_2-3、查看当前mysql支持的存储引擎" class="header-anchor">#</a> 2.3、查看当前mysql支持的存储引擎？</h4> <p>​       <code>show engines \G</code></p> <div class="language- extra-class"><pre><code>   mysql 5.5.36版本支持的光速引擎有9个：
 *************************** 1. row ***************************
      Engine: FEDERATED
     Support: NO
     Comment: Federated MySQL storage engine
Transactions: NULL
	  XA: NULL
  Savepoints: NULL
*************************** 2. row ***************************
      Engine: MRG_MYISAM
     Support: YES
     Comment: Collection of identical MyISAM tables
Transactions: NO
	  XA: NO
  Savepoints: NO
*************************** 3. row ***************************
      Engine: MyISAM
     Support: YES
     Comment: MyISAM storage engine
Transactions: NO
	  XA: NO
  Savepoints: NO
*************************** 4. row ***************************
      Engine: BLACKHOLE
     Support: YES
     Comment: /dev/null storage engine (anything you write to it disappears)
Transactions: NO
	  XA: NO
  Savepoints: NO
*************************** 5. row ***************************
      Engine: CSV
     Support: YES
     Comment: CSV storage engine
Transactions: NO
	  XA: NO
  Savepoints: NO
*************************** 6. row ***************************
      Engine: MEMORY
     Support: YES
     Comment: Hash based, stored in memory, useful for temporary tables
Transactions: NO
	  XA: NO
  Savepoints: NO
*************************** 7. row ***************************
      Engine: ARCHIVE
     Support: YES
     Comment: Archive storage engine
Transactions: NO
	  XA: NO
  Savepoints: NO
*************************** 8. row ***************************
      Engine: InnoDB
     Support: DEFAULT
     Comment: Supports transactions, row-level locking, and foreign keys
Transactions: YES
	  XA: YES
  Savepoints: YES
*************************** 9. row ***************************
      Engine: PERFORMANCE_SCHEMA
     Support: YES
     Comment: Performance Schema
	 Transactions: NO
	  XA: NO
     Savepoints: NO
</code></pre></div><h4 id="_2-4、常见的存储引擎"><a href="#_2-4、常见的存储引擎" class="header-anchor">#</a> 2.4、常见的存储引擎？</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">Engine</span>: MyISAM
Support: YES
<span class="token keyword">Comment</span>: MyISAM storage <span class="token keyword">engine</span>
<span class="token keyword">Transactions</span>: <span class="token keyword">NO</span>
XA: <span class="token keyword">NO</span>
Savepoints: <span class="token keyword">NO</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>MyISAM这种存储引擎不支持事务。是mysql最常用的存储引擎，但是这种存储引擎不是默认的。</p> <p><strong>MyISAM采用三个文件组织一个表：</strong></p> <p>xxx.frm(存储格式的文件)</p> <p>xxx.MYD(存储表中数据的文件)</p> <p>xxx.MYI(存储表中索引的文件)</p> <p><strong>非聚集索引：</strong></p> <p>(1)查看该表的myi文件有没有以id为索引的索引树。</p> <p>(2)根据这个id索引找到叶子节点的id值，从而得到它里面的数据地址。(叶子节点存的是索引和数据地址)。</p> <p>(3)根据数据地址去myd文件里面找到对应的数据返回出来</p> <p><strong>优点</strong>：可被压缩，节省存储空间。并且可以转换为只读表，提高检索效率。</p> <p><strong>缺点</strong>:  不支持事务。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">Engine</span>: <span class="token keyword">InnoDB</span>
Support: <span class="token keyword">DEFAULT</span>
<span class="token keyword">Comment</span>: Supports <span class="token keyword">transactions</span><span class="token punctuation">,</span> <span class="token keyword">row</span><span class="token operator">-</span><span class="token keyword">level</span> locking<span class="token punctuation">,</span> <span class="token operator">and</span> <span class="token keyword">foreign</span> <span class="token keyword">keys</span>
<span class="token keyword">Transactions</span>: YES
XA: YES
Savepoints: YES
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>user.ib  索引文件</p> <p>user.frm数据结构类型</p> <p>默认主键为索引不需要 .myi文件</p> <p><strong>优点：</strong> 支持事务、行级锁、外键等。这种存储引擎数据的安全得到保障。</p> <p>表的结构存储在xxx.frm文件中，数据存储在tablespace这样的表空间中(逻辑概念)，无法被压缩，无法转换成只读。</p> <p>这种InnoDB存储引擎在MySQL数据库崩溃之后提供自动恢复机制。InoDB支持级联删除和级联更新。</p> <p><strong>非聚集索引：</strong></p> <p>(1)找到name索引树</p> <p>(2)根据name的值找到该树下叶子的name索引和主键值</p> <p>(3)用主键值去主键索引树去叶子节点到该条数据信息</p> <div class="language- extra-class"><pre><code>Engine: MEMORY
Support: YES
Comment: Hash based, stored in memory, useful for temporary tables
Transactions: NO
XA: NO
Savepoints: NO
</code></pre></div><p><strong>缺点</strong>：不支持事务。数据容易丢失。因为所有数据和索引都是存储在内存当中的。
<strong>优点</strong>：查询速度最快。
以前叫做HEPA引擎。</p> <h3 id="_3、事务-transaction"><a href="#_3、事务-transaction" class="header-anchor">#</a> 3、事务(Transaction)</h3> <h4 id="_3-1、什么是事务"><a href="#_3-1、什么是事务" class="header-anchor">#</a> 3.1、什么是事务？</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>一个事务是一个完整的业务逻辑单元，不可再分。

比如：银行账户，从A账户向B账户转账<span class="token number">10000</span>元，需要执行两条<span class="token keyword">update</span>语句。
<span class="token keyword">update</span> t_act <span class="token keyword">set</span> balance <span class="token operator">=</span> balance <span class="token operator">-</span> <span class="token number">10000</span> <span class="token keyword">where</span> actno <span class="token operator">=</span> <span class="token string">'act-001'</span><span class="token punctuation">;</span>
<span class="token keyword">update</span> t_act <span class="token keyword">set</span> balance <span class="token operator">=</span> balance <span class="token operator">+</span> <span class="token number">10000</span> <span class="token keyword">where</span> actno <span class="token operator">=</span> <span class="token string">'act-002'</span><span class="token punctuation">;</span>

以上两条DML语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。

想要保证以上的两条DML语句同时成功或者同时失败，那么就要使用数据库的<span class="token string">&quot;事务机制&quot;</span>。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_3-2、和事务相关的语句只有-dml语句。-insert-delete-update"><a href="#_3-2、和事务相关的语句只有-dml语句。-insert-delete-update" class="header-anchor">#</a> 3.2、和事务相关的语句只有：DML语句。(insert delete update)</h4> <p>​       为什么？因为他们这三个语句都是和数据库表当中的&quot;数据&quot;相关的。</p> <p>​       事务的存在是为了保证数据的完整性，安全性。</p> <h4 id="_3-3、假设所有的业务都能使用1条dml语句搞定-还需要事务机制吗"><a href="#_3-3、假设所有的业务都能使用1条dml语句搞定-还需要事务机制吗" class="header-anchor">#</a> 3.3、假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？</h4> <p>​       不需要事务机制。</p> <p>​       但实际情况不是这样的，通常一个&quot;事儿(事务【业务】)&quot;需要多条DML语句共同联合完成。</p> <h4 id="_3-4、事务的特性"><a href="#_3-4、事务的特性" class="header-anchor">#</a> 3.4、事务的特性？</h4> <p>事务包括四大特性：ACID</p> <p>​	<strong>A:原子性</strong>：事务是最小的工作单元，不可再分。</p> <p>​	<strong>C:一致性</strong>：事务必须保证多条DML语句同时成功或者同时失败。</p> <p>​	<strong>I : 隔离性：</strong> 事务A与事务B之间具有隔离。</p> <p>​	<strong>D:持久性</strong>：持久性说的是最终数据必须持久化到硬盘中，事务才算成功结束。</p> <h4 id="_3-5、关于事务之间的隔离性"><a href="#_3-5、关于事务之间的隔离性" class="header-anchor">#</a> 3.5、关于事务之间的隔离性？</h4> <p>事务隔离性存在隔离级别，理论上隔离级别包括4个：</p> <ol><li>第一级别：读未提交(read uncommitted)
对方事务还没有提交，我们当前事务可以读取到对方未提交的数据。
读未提交存在脏读(Dirty Read) 现象：表示读到了脏数据。</li> <li>第二级别：读已提交(read committed)
对方事务提交之后的数据我方可以读取到。
读已提交存在的问题是：不可重复读。</li> <li>第三级别：可重复读(repeatable read)
这种隔离级别解决了：不可重复读问题。
这种隔离级别存在的问题是：读取到的数据是幻象。</li> <li>第四级别：序列化读/串行化读
解决了所有问题。
效率低，需要事务排队</li></ol> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>Oracle数据库默认的隔离级别是：第二级别，读已提交。</p> <p>mysql数据库默认的隔离级别是：第三级别，可重复读。</p></div> <h4 id="_3-6、演示事务"><a href="#_3-6、演示事务" class="header-anchor">#</a> 3.6、演示事务：</h4> <ul><li><p>mysql事务默认情况下是自动提交的。(什么是自动提交？只要执行任意一条DML语句则提交一次。)</p></li> <li><p>怎么关闭默认提交？(开启事务)</p> <p><code>start transaction;</code>   关闭自动提交机制。</p></li> <li><p>建表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_user<span class="token punctuation">;</span>
 <span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>
       id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
       username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>演示：mysql中的事务是支持自动提交的，只要执行一条DML语句，则提交一次。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>   mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Querk OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.03</span> sec<span class="token punctuation">)</span>
   mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span> id <span class="token operator">|</span> username <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs       <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
   mysql<span class="token operator">&gt;</span> <span class="token keyword">rollback</span><span class="token punctuation">;</span>
   Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

   mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	 <span class="token operator">+</span><span class="token comment">----+----------+</span>
	 <span class="token operator">|</span> id <span class="token operator">|</span> username <span class="token operator">|</span>
	 <span class="token operator">+</span><span class="token comment">----+----------+</span>
	 <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs       <span class="token operator">|</span>
	 <span class="token operator">+</span><span class="token comment">----+----------+</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>演示：使用start transaction; 关闭自动提交机制。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	mysql<span class="token operator">&gt;</span> <span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span> id <span class="token operator">|</span> username <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span> id <span class="token operator">|</span> username <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> wangwu   <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">rollback</span><span class="token punctuation">;</span>    <span class="token comment">//回滚</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span> id <span class="token operator">|</span> username <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs       <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+----------+</span>
	<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;joke&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;xiaozhaozhao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token operator">|</span> id <span class="token operator">|</span> username     <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs           <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> wangwu       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> object       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> joke         <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> xiaozhaozhao <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">commit</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token operator">|</span> id <span class="token operator">|</span> username     <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs           <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> wangwu       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> object       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> joke         <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> xiaozhaozhao <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">rollback</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token operator">|</span> id <span class="token operator">|</span> username     <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> zs           <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> wangwu       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> object       <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> joke         <span class="token operator">|</span>
	<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> xiaozhaozhao <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">----+--------------+</span>
	<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token keyword">rollback</span> : 回滚。
<span class="token keyword">commit</span> ： 提交。
提交之后回滚不了。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br></div></div><ul><li><p>演示两个事务，假如隔离级别：</p> <p>演示第1级别：读未提交</p> <p>​    set global transaction isolation level read uncommitted;</p> <p>演示第二级别；读已提交</p> <p>​    set global transaction isolation level read committed;</p> <p>演示第三级别:可重复读</p> <p>​    set global transaction isolation level repeatable read;</p></li></ul></li></ul> <h4 id="_3-7、mysql远程登录"><a href="#_3-7、mysql远程登录" class="header-anchor">#</a> 3.7、mysql远程登录</h4> <p><code>mysql -h192.168.151.18 -uroot -p444</code></p> <h3 id="_4、索引"><a href="#_4、索引" class="header-anchor">#</a> 4、索引</h3> <h4 id="_4-1、什么是索引-有什么用"><a href="#_4-1、什么是索引-有什么用" class="header-anchor">#</a> 4.1、什么是索引？有什么用？</h4> <ul><li><p>索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。</p></li> <li><p>在数据库方面，查询一张表的时候有两种检索方式：</p> <p>​	    第一种方式：<strong>全表扫描</strong></p> <p>​	    第二种方式：<strong>根据索引检索(效率很高)</strong></p></li> <li><p>索引为什么可以提高检索效率呢？</p> <p>​	    其实最根本的原理是缩小了扫描的范围。</p></li></ul> <p>索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护。是有维护成本的。</p> <p>比如：表中的数据经常被修改，这样就不适合添加索引，因为数据一旦修改，索引需要重新排序，进行维护。</p> <p>添加索引是给某一个字段，或者说某些字段添加索引。</p> <p><code>select ename,sal from emp where ename = 'SMITH';</code></p> <p>当ename字段没有添加索引的时候，以上sql语句会进行全表扫描，扫描ename字段中所有的值。</p> <p>当ename字段添加索引的时候，以上sql语句会根据索引扫描，快速定位。</p> <h4 id="_4-2、怎么创建索引对象-怎么删除索引对象"><a href="#_4-2、怎么创建索引对象-怎么删除索引对象" class="header-anchor">#</a> 4.2、怎么创建索引对象？怎么删除索引对象？</h4> <p>​	创建索引对象：</p> <p>​	  <code>create index 索引名称 on 表名(字段名);</code></p> <p>​	删除索引对象：</p> <p>​	    <code>drop index 索引名称 on 表名;</code></p> <h4 id="_4-3、什么时候考虑给字段添加索引-满足什么条件"><a href="#_4-3、什么时候考虑给字段添加索引-满足什么条件" class="header-anchor">#</a> 4.3、什么时候考虑给字段添加索引？(满足什么条件)</h4> <ul><li>数据量庞大。(根据客户的需求，根据线上的环境)
* 该字段很少的DML操作。(因为字段进行修改操作，索引也需要维护)</li> <li>该字段经常出现在where子句中。(经常根据哪个字段维护)</li></ul> <h4 id="_4-4、注意-主键具有unique约束的字段会自动添加索引。"><a href="#_4-4、注意-主键具有unique约束的字段会自动添加索引。" class="header-anchor">#</a> 4.4、注意：主键具有unique约束的字段会自动添加索引。</h4> <p>​       根据主键查询效率较高，尽量根据<strong>主键</strong>检索。</p> <h4 id="_4-5、查看sql语句的执行计划"><a href="#_4-5、查看sql语句的执行计划" class="header-anchor">#</a> 4.5、查看sql语句的执行计划：</h4> <ul><li><code>mysql&gt; explain select ename,sal from emp where sal = 5000;</code></li></ul> <table><thead><tr><th>id</th> <th>select_type</th> <th>table</th> <th>partitions</th> <th>type</th> <th>possible_keys</th> <th>key</th> <th>key_len</th> <th>ref</th> <th>rows</th> <th>filtered</th> <th>Extra</th></tr></thead> <tbody><tr><td>1</td> <td>SIMPLE</td> <td>emp</td> <td>NULL</td> <td>ALL</td> <td>NULL</td> <td>NULL</td> <td>NULL</td> <td>NULL</td> <td>15</td> <td>10.00</td> <td>Using where</td></tr></tbody></table> <p>给薪资sal字段添加索引：<code>create index emp_sal_index on emp(sal);</code></p> <ul><li><code>mysql&gt; explain select ename,sal from emp where sal = 5000;</code></li></ul> <table><thead><tr><th>id</th> <th>select_type</th> <th>table</th> <th>partitions</th> <th>type</th> <th>possible_keys</th> <th>key</th> <th>key_len</th> <th>ref</th> <th>rows</th> <th>filtered</th> <th>Extra</th></tr></thead> <tbody><tr><td>1</td> <td>SIMPLE</td> <td>emp</td> <td>NULL</td> <td>ref</td> <td>emp_sal_index</td> <td>emp_sal_index</td> <td>9</td> <td>const</td> <td>1</td> <td>100.00</td> <td>NULL</td></tr></tbody></table> <p><strong>rows检索次数减少了</strong>，row表示必须查找的行数</p> <p>删除索引:<code>drop index emp_sal_index on emp;</code></p> <p>🧀 <a href="https://www.jianshu.com/u/dad4d9675892" target="_blank" rel="noopener noreferrer">MySql优化--EXPLAIN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_4-6、索引底层采用的数据结构是-b-tree"><a href="#_4-6、索引底层采用的数据结构是-b-tree" class="header-anchor">#</a> 4.6、索引底层采用的数据结构是：B + Tree</h4> <h4 id="_4-7、索引的实现原理"><a href="#_4-7、索引的实现原理" class="header-anchor">#</a> 4.7、索引的实现原理？</h4> <p>​       通过B+ Tree缩小扫描范围，底层索引进行了排序，分区，最终通过索引检索到数据之后，获取到关联的物理地址，通过物理地址定位表中的数据，效率是最高的。
<code>select ename from emp where ename = 'SMITH';</code>
​通过索引转换为：
<code>select ename from emp where 物理地址 = 0x123;</code></p> <h4 id="_4-8、索引的分类"><a href="#_4-8、索引的分类" class="header-anchor">#</a> 4.8、索引的分类？</h4> <p>​       单一索引：给单个字段添加索引</p> <p>​       复合索引：给多个字段联合起来添加一个索引</p> <p>​       主键索引：主键上会自动添加索引</p> <p>​       唯一索引：有unique约束的字段会自动添加索引</p> <p>​       ......</p> <h4 id="_4-9、索引什么时候失效"><a href="#_4-9、索引什么时候失效" class="header-anchor">#</a> 4.9、索引什么时候失效？</h4> <p><code>select ename from emp where ename like ' %A% ';</code></p> <p>模糊查询**的时候，<strong>第一个通配符使用的是%</strong>，这个时候索引是是失效的。</p> <h3 id="_5、视图-view"><a href="#_5、视图-view" class="header-anchor">#</a> 5、视图(view)</h3> <h4 id="_5-1、什么是视图"><a href="#_5-1、什么是视图" class="header-anchor">#</a> 5.1、什么是视图？</h4> <p>站在不同的角度去看到数据。(同一张表的数据，通过不同的角度去看待)</p> <h4 id="_5-2、怎么创建视图-怎么删除视图"><a href="#_5-2、怎么创建视图-怎么删除视图" class="header-anchor">#</a> 5.2、怎么创建视图？怎么删除视图？</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">view</span> myview <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">view</span> myview<span class="token punctuation">;</span>

注意：只有DQL语句才能以视图对象的方式创建出来。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_5-3、对视图进行增删改查-会影响到原表数据。-通过视图影响原表数据-不是直接操作的原表"><a href="#_5-3、对视图进行增删改查-会影响到原表数据。-通过视图影响原表数据-不是直接操作的原表" class="header-anchor">#</a> 5.3、对视图进行增删改查，会影响到原表数据。(通过视图影响原表数据，不是直接操作的原表)</h4> <p>可以对视图进行CRUD操作。</p> <h4 id="_5-4、面向视图操作"><a href="#_5-4、面向视图操作" class="header-anchor">#</a> 5.4、面向视图操作</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> myview<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7499</span> <span class="token operator">|</span> ALLEN  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> KING   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7876</span> <span class="token operator">|</span> ADAMS  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+</span>

  <span class="token keyword">create</span> <span class="token keyword">table</span> emp_bak <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
  <span class="token keyword">create</span> <span class="token keyword">view</span> myview1 <span class="token keyword">as</span> <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp_bak<span class="token punctuation">;</span>
  <span class="token keyword">update</span> myview1 <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'hehe'</span><span class="token punctuation">,</span>sal <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">where</span> empno <span class="token number">7369</span><span class="token punctuation">;</span>  <span class="token comment">//通过视图修改原表数据。</span>
  <span class="token keyword">delete</span> <span class="token keyword">from</span> myview1 <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">7369</span><span class="token punctuation">;</span>  <span class="token comment">//通过视图删除原表数据。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="_5-5、视图的作用"><a href="#_5-5、视图的作用" class="header-anchor">#</a> 5.5、视图的作用？</h4> <p>​       视图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供相关的视图，java程序员只对视图对象进行CRUD。</p> <h3 id="_6、dba命令"><a href="#_6、dba命令" class="header-anchor">#</a> 6、DBA命令</h3> <h4 id="_6-1、在数据库当中的数据导出"><a href="#_6-1、在数据库当中的数据导出" class="header-anchor">#</a> 6.1、在数据库当中的数据导出</h4> <p>在windows的DOS命令窗口中执行：</p> <ul><li><p>(导出整个库)</p> <p><code>mysqldump mydbtest&gt;D:\mydbtest.sql -uroot -p999</code></p></li> <li><p>(导出数据库中指定的表)</p> <p><code>mysqldump mydbtest emp&gt;D:\mydbtest.sql -uroot -p999</code></p></li></ul> <h4 id="_6-2、导入数据"><a href="#_6-2、导入数据" class="header-anchor">#</a> 6.2、导入数据</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> mydbtest<span class="token punctuation">;</span>
<span class="token keyword">use</span> mydbtest<span class="token punctuation">;</span>
source D:\mydbtest<span class="token punctuation">.</span><span class="token keyword">sql</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7、数据库设计三范式-重点内容-面试经常会问"><a href="#_7、数据库设计三范式-重点内容-面试经常会问" class="header-anchor">#</a> 7、数据库设计三范式(重点内容，面试经常会问)</h3> <h4 id="_7-1、什么是设计范式"><a href="#_7-1、什么是设计范式" class="header-anchor">#</a> 7.1、什么是设计范式？</h4> <p>设计表的依据。按照这三个范式设计的表不会出现数据冗余。</p> <h4 id="_7-2、三范式都是哪些"><a href="#_7-2、三范式都是哪些" class="header-anchor">#</a> 7.2、三范式都是哪些？</h4> <ul><li><p>第一范式：任何一张表都应该有主键，并且每一个字段原子性不可再分。</p></li> <li><p>第二范式：建立在第一范式的基础上，所有非主键字段完全依赖主键，不能产生部份依赖。</p> <p><strong>多对多 : 三张表，关系表两个外键。</strong></p> <p>t_student 学生表</p> <table><thead><tr><th style="text-align:center;">sno(pk)</th> <th style="text-align:center;">sname</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">张三</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">李四</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">王五</td></tr></tbody></table> <p>t_teacher 讲师表</p> <table><thead><tr><th style="text-align:center;">tno(pk)</th> <th style="text-align:center;">tname</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">王老师</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">张老师</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">李老师</td></tr></tbody></table> <p>t_student_teacher_relation 学生讲师关系表</p> <table><thead><tr><th style="text-align:center;">id(pk)</th> <th style="text-align:center;">sno(fk)</th> <th style="text-align:center;">tno(fk)</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">1</td> <td style="text-align:center;">3</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">2</td> <td style="text-align:center;">2</td></tr> <tr><td style="text-align:center;">4</td> <td style="text-align:center;">2</td> <td style="text-align:center;">3</td></tr> <tr><td style="text-align:center;">5</td> <td style="text-align:center;">3</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">6</td> <td style="text-align:center;">3</td> <td style="text-align:center;">3</td></tr></tbody></table></li> <li><p>第三范式：建立在第二范式的基础上，所有非主键字段直接依赖主键，不能产生传递依赖。</p> <p><strong>一对多 : 两张表，多的表加外键。</strong></p> <p>t_class  班级表  班级:学生=1: *</p> <table><thead><tr><th style="text-align:center;">cno(pk)</th> <th style="text-align:center;">cname</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">班级1</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">班级2</td></tr></tbody></table> <p>t_student  学生表</p> <table><thead><tr><th style="text-align:center;">sno(pk)</th> <th style="text-align:center;">sname</th> <th style="text-align:center;">classno(fk)</th></tr></thead> <tbody><tr><td style="text-align:center;">101</td> <td style="text-align:center;">张1</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">102</td> <td style="text-align:center;">张2</td> <td style="text-align:center;">2</td></tr> <tr><td style="text-align:center;">103</td> <td style="text-align:center;">张3</td> <td style="text-align:center;">2</td></tr> <tr><td style="text-align:center;">104</td> <td style="text-align:center;">张4</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">105</td> <td style="text-align:center;">张5</td> <td style="text-align:center;">2</td></tr></tbody></table> <p><strong>提醒：在实际的开发中，以满足客户需求为主，有的时候会拿冗余换执行速度。</strong></p></li></ul> <h4 id="_7-3、一对一怎么设计"><a href="#_7-3、一对一怎么设计" class="header-anchor">#</a> 7.3、一对一怎么设计？</h4> <p>一对一设计有两种方案：</p> <ol><li><strong>主键共享</strong>
t_user_login 用户登陆表</li></ol> <table><thead><tr><th style="text-align:center;">id(pk)</th> <th style="text-align:center;">username</th> <th style="text-align:center;">password</th></tr></thead> <tbody><tr><td style="text-align:center;">１</td> <td style="text-align:center;">zs</td> <td style="text-align:center;">123456</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">ls</td> <td style="text-align:center;">123456</td></tr></tbody></table> <p>​		 t_user_detail 用户详细信息表</p> <table><thead><tr><th style="text-align:center;">id(pk+fk)</th> <th style="text-align:center;">realname</th> <th style="text-align:center;">tel</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">张三</td> <td style="text-align:center;">139641113555</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">李四</td> <td style="text-align:center;">135546666646</td></tr></tbody></table> <ol start="2"><li><p><strong>外键唯一</strong>
t_user_login 用户登陆表</p> <table><thead><tr><th style="text-align:center;">id(pk)</th> <th style="text-align:center;">username</th> <th style="text-align:center;">password</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">zs</td> <td style="text-align:center;">123456</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">ls</td> <td style="text-align:center;">123456</td></tr></tbody></table> <p>t_user_detail 用户详细信息表</p> <table><thead><tr><th style="text-align:center;">id(pk)</th> <th style="text-align:center;">realname</th> <th style="text-align:center;">tel</th> <th style="text-align:center;">userid(fk+unique)</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">李四</td> <td style="text-align:center;">135546666646</td> <td style="text-align:center;">2</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">张三</td> <td style="text-align:center;">139641113555</td> <td style="text-align:center;">1</td></tr></tbody></table></li></ol></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/05/04, 00:39:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/f1a4e0/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">I:O原理</div></a> <a href="/pages/ddc20a/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">锁</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/f1a4e0/" class="prev">I:O原理</a></span> <span class="next"><a href="/pages/ddc20a/">锁</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:hwj2586@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Jaredhi" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/Jared-h" title="GitHub" target="_blank" class="iconfont icon-gitee"></a><a href="https://t.kugou.com/2npMP0dxWV2" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
    Theme by
    <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a>
    Copyright © 2020-2021
    <span>Jared H <br> <a href="https://www.beian.miit.gov.cn" target="_blank">粤ICP备20046800号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.dce23f32.js" defer></script><script src="/assets/js/2.0a476569.js" defer></script><script src="/assets/js/3.03310ead.js" defer></script><script src="/assets/js/39.52ce0e61.js" defer></script>
  </body>
</html>