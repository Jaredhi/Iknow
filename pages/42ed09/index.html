<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring | Jared&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="https://www.jaredh.cn/.vuepress/public/img/%E7%BA%B8%E9%A3%9E%E6%9C%BA.png">
    <meta name="description" content="知识积累库">
    <meta name="keywords" content="个人技术博客,全栈,全栈开发,DevOps,框架,技术文档,学习,Java,Spring,TypeScript,vue,git,markdown">
    <meta name="theme-color" content="#1166cd">
    <link rel="preload" href="/assets/css/0.styles.44d0f432.css" as="style"><link rel="preload" href="/assets/js/app.dce23f32.js" as="script"><link rel="preload" href="/assets/js/2.0a476569.js" as="script"><link rel="preload" href="/assets/js/3.03310ead.js" as="script"><link rel="preload" href="/assets/js/54.f893c428.js" as="script"><link rel="prefetch" href="/assets/js/10.be7f436c.js"><link rel="prefetch" href="/assets/js/100.c5faf45f.js"><link rel="prefetch" href="/assets/js/101.42e0ac50.js"><link rel="prefetch" href="/assets/js/102.bb14e64b.js"><link rel="prefetch" href="/assets/js/103.81bf3c7c.js"><link rel="prefetch" href="/assets/js/104.d1c8d8f0.js"><link rel="prefetch" href="/assets/js/105.d7aa788f.js"><link rel="prefetch" href="/assets/js/106.39cb6fdd.js"><link rel="prefetch" href="/assets/js/107.b26b0841.js"><link rel="prefetch" href="/assets/js/108.41d302aa.js"><link rel="prefetch" href="/assets/js/109.f4382788.js"><link rel="prefetch" href="/assets/js/11.32bd7745.js"><link rel="prefetch" href="/assets/js/110.3d84f092.js"><link rel="prefetch" href="/assets/js/111.2c7a7ff1.js"><link rel="prefetch" href="/assets/js/112.23adafb9.js"><link rel="prefetch" href="/assets/js/113.f6aeaecd.js"><link rel="prefetch" href="/assets/js/114.2012c13a.js"><link rel="prefetch" href="/assets/js/115.bf3e2dbe.js"><link rel="prefetch" href="/assets/js/116.3bd9a150.js"><link rel="prefetch" href="/assets/js/117.ab19fd54.js"><link rel="prefetch" href="/assets/js/118.9ad186b9.js"><link rel="prefetch" href="/assets/js/119.a193d528.js"><link rel="prefetch" href="/assets/js/12.ef6ddb2c.js"><link rel="prefetch" href="/assets/js/120.c614caf0.js"><link rel="prefetch" href="/assets/js/121.5b0e0013.js"><link rel="prefetch" href="/assets/js/13.35718513.js"><link rel="prefetch" href="/assets/js/14.278daae5.js"><link rel="prefetch" href="/assets/js/15.075b8007.js"><link rel="prefetch" href="/assets/js/16.e764165f.js"><link rel="prefetch" href="/assets/js/17.0dde71b9.js"><link rel="prefetch" href="/assets/js/18.952ee688.js"><link rel="prefetch" href="/assets/js/19.d3d3a5e3.js"><link rel="prefetch" href="/assets/js/20.0cce088c.js"><link rel="prefetch" href="/assets/js/21.7f609d23.js"><link rel="prefetch" href="/assets/js/22.ff109b73.js"><link rel="prefetch" href="/assets/js/23.22e55119.js"><link rel="prefetch" href="/assets/js/24.478b668f.js"><link rel="prefetch" href="/assets/js/25.40934b51.js"><link rel="prefetch" href="/assets/js/26.a8915e14.js"><link rel="prefetch" href="/assets/js/27.9511311d.js"><link rel="prefetch" href="/assets/js/28.6fb9c9bb.js"><link rel="prefetch" href="/assets/js/29.6596af6d.js"><link rel="prefetch" href="/assets/js/30.e47e8fc2.js"><link rel="prefetch" href="/assets/js/31.5054b3ba.js"><link rel="prefetch" href="/assets/js/32.ef73b689.js"><link rel="prefetch" href="/assets/js/33.02c0883b.js"><link rel="prefetch" href="/assets/js/34.d46d5592.js"><link rel="prefetch" href="/assets/js/35.575c59a9.js"><link rel="prefetch" href="/assets/js/36.763c2ec0.js"><link rel="prefetch" href="/assets/js/37.ff0010d5.js"><link rel="prefetch" href="/assets/js/38.f68cf0f1.js"><link rel="prefetch" href="/assets/js/39.52ce0e61.js"><link rel="prefetch" href="/assets/js/4.12ba5ea4.js"><link rel="prefetch" href="/assets/js/40.f682666a.js"><link rel="prefetch" href="/assets/js/41.a89c7af8.js"><link rel="prefetch" href="/assets/js/42.e6b5082b.js"><link rel="prefetch" href="/assets/js/43.5c70f9c4.js"><link rel="prefetch" href="/assets/js/44.d423d97b.js"><link rel="prefetch" href="/assets/js/45.3accf45c.js"><link rel="prefetch" href="/assets/js/46.adead9ed.js"><link rel="prefetch" href="/assets/js/47.45febb5f.js"><link rel="prefetch" href="/assets/js/48.91e54ab7.js"><link rel="prefetch" href="/assets/js/49.b6bdbd76.js"><link rel="prefetch" href="/assets/js/5.b2da7372.js"><link rel="prefetch" href="/assets/js/50.3a045da3.js"><link rel="prefetch" href="/assets/js/51.a2eae4fb.js"><link rel="prefetch" href="/assets/js/52.a0f21da8.js"><link rel="prefetch" href="/assets/js/53.62b2f532.js"><link rel="prefetch" href="/assets/js/55.50e21f24.js"><link rel="prefetch" href="/assets/js/56.98d91913.js"><link rel="prefetch" href="/assets/js/57.98167654.js"><link rel="prefetch" href="/assets/js/58.c1ddc2f0.js"><link rel="prefetch" href="/assets/js/59.681ea709.js"><link rel="prefetch" href="/assets/js/6.1995ebab.js"><link rel="prefetch" href="/assets/js/60.df1b91b1.js"><link rel="prefetch" href="/assets/js/61.fabace57.js"><link rel="prefetch" href="/assets/js/62.29da048d.js"><link rel="prefetch" href="/assets/js/63.918fe3f6.js"><link rel="prefetch" href="/assets/js/64.12856044.js"><link rel="prefetch" href="/assets/js/65.6ebfb4a2.js"><link rel="prefetch" href="/assets/js/66.770ad29e.js"><link rel="prefetch" href="/assets/js/67.80bd9ed5.js"><link rel="prefetch" href="/assets/js/68.b55578de.js"><link rel="prefetch" href="/assets/js/69.fa66951c.js"><link rel="prefetch" href="/assets/js/7.9c6de7b0.js"><link rel="prefetch" href="/assets/js/70.bf0ffdac.js"><link rel="prefetch" href="/assets/js/71.40ba910e.js"><link rel="prefetch" href="/assets/js/72.8a811346.js"><link rel="prefetch" href="/assets/js/73.63d2cd5a.js"><link rel="prefetch" href="/assets/js/74.44ca88ab.js"><link rel="prefetch" href="/assets/js/75.d5548bc0.js"><link rel="prefetch" href="/assets/js/76.ecd79f6f.js"><link rel="prefetch" href="/assets/js/77.8fbe5c6a.js"><link rel="prefetch" href="/assets/js/78.005604f5.js"><link rel="prefetch" href="/assets/js/79.59585fa6.js"><link rel="prefetch" href="/assets/js/8.46697342.js"><link rel="prefetch" href="/assets/js/80.2088fa05.js"><link rel="prefetch" href="/assets/js/81.17d30c5d.js"><link rel="prefetch" href="/assets/js/82.a080e5a7.js"><link rel="prefetch" href="/assets/js/83.96495564.js"><link rel="prefetch" href="/assets/js/84.28381bdd.js"><link rel="prefetch" href="/assets/js/85.655161e7.js"><link rel="prefetch" href="/assets/js/86.34a8880c.js"><link rel="prefetch" href="/assets/js/87.a407b8ed.js"><link rel="prefetch" href="/assets/js/88.da255f54.js"><link rel="prefetch" href="/assets/js/89.1f937db1.js"><link rel="prefetch" href="/assets/js/9.2980261e.js"><link rel="prefetch" href="/assets/js/90.44ed90c7.js"><link rel="prefetch" href="/assets/js/91.d0ebb249.js"><link rel="prefetch" href="/assets/js/92.fb7501ee.js"><link rel="prefetch" href="/assets/js/93.bf965309.js"><link rel="prefetch" href="/assets/js/94.08340d37.js"><link rel="prefetch" href="/assets/js/95.9a1cc6b8.js"><link rel="prefetch" href="/assets/js/96.aae0ce80.js"><link rel="prefetch" href="/assets/js/97.d7531130.js"><link rel="prefetch" href="/assets/js/98.f247833a.js"><link rel="prefetch" href="/assets/js/99.09ceb6de.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44d0f432.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://www.jaredh.cn/public/gif/go.gif" alt="Jared's blog" class="logo"> <span class="site-name can-hide">Jared's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/codeBasics/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/cad62e/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/c47e12/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/41a364/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/15ab06/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/1e979a/" class="nav-link">数据库SQL</a></li><li class="dropdown-item"><!----> <a href="/pages/b5c9b5/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="研发工具" class="dropdown-title"><a href="/R&amp;D-Tools/" class="link-title">研发工具</a> <span class="title" style="display:none;">研发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4d971e/" class="nav-link">集成开发环境</a></li><li class="dropdown-item"><!----> <a href="/pages/8a8aed/" class="nav-link">Linux系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3a1708/" class="nav-link">代码管理</a></li><li class="dropdown-item"><!----> <a href="/pages/40b1d2/" class="nav-link">项目管理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/framework/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/734f2c/" class="nav-link">中间件</a></li><li class="dropdown-subitem"><a href="/pages/42ed09/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Spring家族</a></li><li class="dropdown-subitem"><a href="/pages/31cc55/" class="nav-link">服务器软件</a></li><li class="dropdown-subitem"><a href="/pages/8ec421/" class="nav-link">数据库</a></li><li class="dropdown-subitem"><a href="/pages/4b933d/" class="nav-link">搜索引擎</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">分布式&amp;微服务</a></li><li class="dropdown-subitem"><a href="/pages/91630a/" class="nav-link">容器化</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5038fc/" class="nav-link">基础</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">模板框架</a></li><li class="dropdown-subitem"><a href="/pages/99eb21/" class="nav-link">组件化框架</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维相关" class="dropdown-title"><a href="/ops/" class="link-title">运维相关</a> <span class="title" style="display:none;">运维相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/51470f/" class="nav-link">运维知识</a></li><li class="dropdown-item"><!----> <a href="/pages/f1406d/" class="nav-link">部署工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/079753/" class="nav-link">在线教育</a></li><li class="dropdown-item"><!----> <a href="/pages/dd9f23/" class="nav-link">电商</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3a5f05/" class="nav-link">疑惑日志</a></li><li class="dropdown-item"><!----> <a href="/pages/7176e3/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/link/" class="nav-link">友链</a></li><li class="dropdown-item"><!----> <a href="/books/index.html" class="nav-link">书籍</a></li><li class="dropdown-item"><!----> <a href="/relaxation/index.html" class="nav-link">娱乐</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Jaredhi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Jared-h" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/HIHE_i" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://jaredh.oss-cn-shenzhen.aliyuncs.com/public/img/me1.png"> <div class="blogger-info"><h3>    Jared H   </h3> <span>  💻🤣😜  </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程基础" class="dropdown-title"><a href="/codeBasics/" class="link-title">编程基础</a> <span class="title" style="display:none;">编程基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/cad62e/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/c47e12/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/41a364/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/15ab06/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/1e979a/" class="nav-link">数据库SQL</a></li><li class="dropdown-item"><!----> <a href="/pages/b5c9b5/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="研发工具" class="dropdown-title"><a href="/R&amp;D-Tools/" class="link-title">研发工具</a> <span class="title" style="display:none;">研发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4d971e/" class="nav-link">集成开发环境</a></li><li class="dropdown-item"><!----> <a href="/pages/8a8aed/" class="nav-link">Linux系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3a1708/" class="nav-link">代码管理</a></li><li class="dropdown-item"><!----> <a href="/pages/40b1d2/" class="nav-link">项目管理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/framework/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/734f2c/" class="nav-link">中间件</a></li><li class="dropdown-subitem"><a href="/pages/42ed09/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Spring家族</a></li><li class="dropdown-subitem"><a href="/pages/31cc55/" class="nav-link">服务器软件</a></li><li class="dropdown-subitem"><a href="/pages/8ec421/" class="nav-link">数据库</a></li><li class="dropdown-subitem"><a href="/pages/4b933d/" class="nav-link">搜索引擎</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">分布式&amp;微服务</a></li><li class="dropdown-subitem"><a href="/pages/91630a/" class="nav-link">容器化</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5038fc/" class="nav-link">基础</a></li><li class="dropdown-subitem"><a href="/" class="nav-link">模板框架</a></li><li class="dropdown-subitem"><a href="/pages/99eb21/" class="nav-link">组件化框架</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维相关" class="dropdown-title"><a href="/ops/" class="link-title">运维相关</a> <span class="title" style="display:none;">运维相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/51470f/" class="nav-link">运维知识</a></li><li class="dropdown-item"><!----> <a href="/pages/f1406d/" class="nav-link">部署工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/079753/" class="nav-link">在线教育</a></li><li class="dropdown-item"><!----> <a href="/pages/dd9f23/" class="nav-link">电商</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3a5f05/" class="nav-link">疑惑日志</a></li><li class="dropdown-item"><!----> <a href="/pages/7176e3/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/link/" class="nav-link">友链</a></li><li class="dropdown-item"><!----> <a href="/books/index.html" class="nav-link">书籍</a></li><li class="dropdown-item"><!----> <a href="/relaxation/index.html" class="nav-link">娱乐</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Jaredhi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Jared-h" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/HIHE_i" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>后端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Spring家族</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/42ed09/" aria-current="page" class="active sidebar-link">Spring</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/42ed09/#第1章-spring概述" class="sidebar-link">第1章 Spring概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/42ed09/#spring简述" class="sidebar-link">spring简述</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#怎么使用spring" class="sidebar-link">怎么使用spring</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#不放入到spring容器中的对象" class="sidebar-link">不放入到spring容器中的对象</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#什么样的对象放入容器中" class="sidebar-link">什么样的对象放入容器中</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#使用spring框架的步骤" class="sidebar-link">使用spring框架的步骤</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#第2章-ioc-控制反转" class="sidebar-link">第2章 IOC 控制反转</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/42ed09/#ioc技术实现使用的di-依赖注入" class="sidebar-link">ioc技术实现使用的DI（依赖注入）</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#基于xml的di" class="sidebar-link">基于xml的DI</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#基于注解的di" class="sidebar-link">基于注解的DI</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#ioc能实现解耦合" class="sidebar-link">ioc能实现解耦合</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#第3章-aop-面向切面编程" class="sidebar-link">第3章 AOP 面向切面编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/42ed09/#动态代理" class="sidebar-link">动态代理</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#aop概述" class="sidebar-link">AOP概述</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#aop-编程术语-掌握" class="sidebar-link">AOP 编程术语(掌握)</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#什么时候考虑使用aop技术" class="sidebar-link">什么时候考虑使用AOP技术</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#aop的实现框架" class="sidebar-link">AOP的实现框架</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#aspectj框架的使用" class="sidebar-link">aspectj框架的使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#第4章-spring集成mybatis" class="sidebar-link">第4章 Spring集成Mybatis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/42ed09/#整合的想法" class="sidebar-link">整合的想法</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#mybatis使用步骤" class="sidebar-link">mybatis使用步骤</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#交给spring的mybatis对象" class="sidebar-link">交给spring的mybatis对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#第5章-spring事务" class="sidebar-link">第5章 Spring事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/42ed09/#什么是事务" class="sidebar-link">什么是事务</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#在什么时候想到使用事务" class="sidebar-link">在什么时候想到使用事务</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#通常怎么处理事务" class="sidebar-link">通常怎么处理事务</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#问题中事务的处理方式-有什么不足" class="sidebar-link">问题中事务的处理方式，有什么不足</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#怎么解决不足" class="sidebar-link">怎么解决不足</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#处理事务-需要怎么做-做什么" class="sidebar-link">处理事务，需要怎么做，做什么</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#spring框架中提供的事务处理方案" class="sidebar-link">spring框架中提供的事务处理方案</a></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#总结spring的事务" class="sidebar-link">总结spring的事务</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/42ed09/#第6章-web项目怎么使用容器对象" class="sidebar-link">第6章 Web项目怎么使用容器对象</a></li></ul></li><li><a href="/pages/9b8d04/" class="sidebar-link">SpringMVC</a></li><li><a href="/pages/400f44/" class="sidebar-link">Spring Boot</a></li><li><a href="/pages/cc0fc6/" class="sidebar-link">Spring Cloud</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>服务器软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>搜索引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>分布式-微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>容器化</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-283013c6><div class="articleInfo" data-v-283013c6><ul class="breadcrumbs" data-v-283013c6><li data-v-283013c6><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-283013c6></a></li> <li data-v-283013c6><a href="/framework" title="应用框架-目录页" data-v-283013c6>应用框架</a></li> <li data-v-283013c6><a href="/framework/#后端" title="应用框架#后端" data-v-283013c6>后端</a></li> <li data-v-283013c6><a href="/framework/#Spring家族" title="应用框架#Spring家族" data-v-283013c6>Spring家族</a></li></ul> <div class="info" data-v-283013c6><div title="作者" class="author iconfont icon-touxiang" data-v-283013c6><a href="https://github.com/Jaredhi" target="_blank" title="作者" class="beLink" data-v-283013c6>Jared H</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-283013c6><a href="javascript:;" data-v-283013c6>2020-06-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          Spring
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><iframe src="/markmap/Spring.html" width="100%" height="400" frameborder="0" scrolling="No" leftmargin="0" topmargin="0"></iframe> <h2 id="第1章-spring概述"><a href="#第1章-spring概述" class="header-anchor">#</a> 第1章 Spring概述</h2> <h3 id="spring简述"><a href="#spring简述" class="header-anchor">#</a> spring简述</h3> <ul><li>一个轻量级框架，核心技术是ioc，aop，针对接口编程，实现解耦合。</li> <li>一个容器，储存java对象的容器，需要做的是把对象放入到容器中</li> <li>方便集成各种优秀框架</li></ul> <blockquote><p>Spring 不排斥各种优秀的开源框架，相反 Spring 可以降低各种框架的使用难度，Spring提供了对各种优秀框架（如 Struts,Hibernate、MyBatis）等的直接支持。简化框架的使用。Spring 像插线板一样，其他框架是插头，可以容易的组合到一起。需要使用哪个框架，就把这个插头放入插线板。不需要可以轻易的移除。</p></blockquote> <ul><li><a href="https://spring.io/" target="_blank" rel="noopener noreferrer">spring官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，<a href="https://www.docs4dev.com/docs/zh/spring-framework/4.3.21.RELEASE/reference" target="_blank" rel="noopener noreferrer">spring中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="怎么使用spring"><a href="#怎么使用spring" class="header-anchor">#</a> 怎么使用spring</h3> <ol><li><p>spring是一个容器，把项目中用的对象放入到容器中</p></li> <li><p>让容器完成对象的创建，对象之间关系的管理（属性赋值）</p></li> <li><p>我们在程序中从容器中获取 要使用的对象</p></li></ol> <h3 id="不放入到spring容器中的对象"><a href="#不放入到spring容器中的对象" class="header-anchor">#</a> 不放入到spring容器中的对象</h3> <ol><li><p>实体类对象，实体类数据来自数据库的</p></li> <li><p>servlet， listener， filter等由Tomcat管理的</p></li></ol> <h3 id="什么样的对象放入容器中"><a href="#什么样的对象放入容器中" class="header-anchor">#</a> 什么样的对象放入容器中</h3> <ul><li>dao类，service类，controller类，工具类
<ol><li>xml配置文件，使用<code>&lt;bean&gt;</code></li> <li>注解</li></ol></li> <li>spring中的对象默认都是单例的，在容器中叫这个名称的对象只有一个</li></ul> <h3 id="使用spring框架的步骤"><a href="#使用spring框架的步骤" class="header-anchor">#</a> 使用spring框架的步骤</h3> <ol><li><p>加入依赖</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>创建类：接口，实现类，没有接口的类</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SomeService</span> <span class="token punctuation">{</span>
 <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomeServiceImpl</span>  <span class="token keyword">implements</span> <span class="token class-name">SomeService</span><span class="token punctuation">{</span>
 <span class="token annotation punctuation">@Override</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SomeServiceImpl 启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>创建spring的配置文件，使用<code>&lt;bean&gt;</code>声明对象</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!--xsd 是约束文件的扩展名  xsd 的约束文件功能强，验证比较全面--&gt;</span>

 <span class="token comment">&lt;!--声明java对象交给Spring创建和管理
       class：类的全限定名称，不能是接口（Spring使用反射创建对象）
       id：自定义的对象名称，要求是唯一值。表示在Spring中的对象名称，
           通过这个名称可以从Spring中找到对象。获取对象
        对象是放入到Spring的容器（Map&lt;id,对象&gt;）
 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.test.service.SomeServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
 
 <span class="token comment">&lt;!--&lt;bean&gt;等同于SomeService someService = new SomServiceImpl();--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>我们使用容器中的对象，通过ApplicationContext接口和他的实现类ClassPathXmlApplcactionContext的方法getBean()</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello World!&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//定义Spring的配置文件</span>
     <span class="token class-name">String</span> config<span class="token operator">=</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">;</span>

     <span class="token comment">//创建Spring的容器对象，根据Spring配置文件的位置，使用接口的不同实现类</span>
     <span class="token comment">//如果Spring配置文件位置是在类路径下（classpath）</span>
     <span class="token class-name">ApplicationContext</span> ctx<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//根目录下    ApplicationContext ctx = new FileSystemXmlApplicationContext(config);</span>
	
     <span class="token comment">//创建容器对象时，就把配置文件的所有对象都创建出来，放到容器中，需要时再取出来</span>
     <span class="token class-name">SomeService</span> service<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SomeService</span><span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;someService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//调用业务的方法</span>
     service<span class="token punctuation">.</span><span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ol> <h2 id="第2章-ioc-控制反转"><a href="#第2章-ioc-控制反转" class="header-anchor">#</a> 第2章 IOC 控制反转</h2> <blockquote><p>控制反转（IoC，Inversion of Control），是一个概念，是一种思想。指将传统上由程序代码直接操控的对象调用权交给容器，通过容器来实现对象的装配和管理。控制反转就是对对象控制权的转移，从程序代码本身反转到了外部容器。通过容器实现对象的创建，属性赋值，依赖的管理。</p></blockquote> <ul><li><p><strong>描述</strong>：把对象的创建，赋值，管理工作都交给代码之外的容器实现，也就是对象的创建是有其它外部资源完成</p></li> <li><p><strong>控制</strong>： 创建对象，对象的属性赋值，对象之间的关系管理。</p></li> <li><p><strong>反转</strong>： 把原来的开发人员管理，创建对象的权限转移给代码之外的容器实现。 由容器代替开发人员管理对象。创建对象，给属性赋值。</p></li> <li><p><strong>正转</strong>：由开发人员在代码中，使用new 构造方法创建对象， 开发人员主动管理对象。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在代码中， 创建对象。--正转。</span>
	 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="ioc技术实现使用的di-依赖注入"><a href="#ioc技术实现使用的di-依赖注入" class="header-anchor">#</a> ioc技术实现使用的DI（依赖注入）</h3> <ul><li><p>Spring 容器是一个超级大工厂，负责创建、管理所有的 Java 对象，这些 Java 对象被称为 Bean。Spring 容器管理着容器中 Bean 之间的依赖关系，Spring 使用“依赖注入”的方式来管理 Bean 之间的依赖关系。使用 IoC 实现对象之间的解耦和。
<strong>开发人员在项目中只需要提供对象的名称， 对象的创建，查找，赋值都由容器内部自己实现</strong> <strong>(spring使用di的技术， 底层使用的是反射机制)</strong></p></li> <li><p>为什么要使用 ioc ： <strong>目的就是减少对代码的改动， 也能实现不同的功能。 实现解耦合</strong></p></li></ul> <h3 id="基于xml的di"><a href="#基于xml的di" class="header-anchor">#</a> 基于xml的DI</h3> <h4 id="set注入"><a href="#set注入" class="header-anchor">#</a> set注入</h4> <ul><li>spring调用类的set方法实现属性赋值</li></ul> <ol><li><p>简单类型的set注入<code>&lt;property name=&quot;属性名&quot; value=&quot;属性的值&quot; /&gt;</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.text.pack01.Student<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!--通过set方法注入--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lisi<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>引用类型的set注入<code>&lt;proper name=&quot;属性名&quot; ref=&quot;bean的id&quot; /&gt;</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>school<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>school<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h4 id="构造注入"><a href="#构造注入" class="header-anchor">#</a> 构造注入</h4> <ul><li>spring调用有参数构造方法</li></ul> <ol><li><code>&lt;constructor-arg&gt;</code>的name属性，name表示构造方法的形参名</li> <li><code>&lt;constructor-arg&gt;</code>的index属性，表示构造方法形参的位置，从0开始</li></ol> <h4 id="自动注入"><a href="#自动注入" class="header-anchor">#</a> 自动注入</h4> <ol><li><p>byName: 按名称注入， java类中引用类型的**【属性名】<strong>和spring容器中bean的</strong>【id】**一样，数据类型一样。这样的bean赋值给引用类型
<code>&lt;bean id=&quot;student&quot; class=&quot;com.text.pack01.Student&quot; autowire=&quot;byName&quot;&gt;</code></p></li> <li><p>byType：按类型注入，java类中引用类型的是**【数据类型】<strong>和spring容器中bean的</strong>【class】**是同源关系的，这样的bean能够赋值给引用类型</p></li></ol> <h3 id="基于注解的di"><a href="#基于注解的di" class="header-anchor">#</a> 基于注解的DI</h3> <h4 id="常用注解"><a href="#常用注解" class="header-anchor">#</a> 常用注解</h4> <ol><li><strong>@Component</strong> 创建对象</li> <li><strong>@Repository</strong> 创建dao对象，用来访问数据库的</li> <li><strong>@Service</strong> 创建Service对象， 处理业务逻辑的，可以有事务功能</li> <li><strong>@Controller</strong> 创建控制器对象的， 接收请求，显示处理结果的</li> <li><strong>@Value</strong> 简单类型的属性赋值</li> <li><strong>@Autowired</strong> spring框架中引用类型的赋值注解， 支持byName,byType,默认是byType</li> <li><strong>@Resource</strong> jdk中的注解，spring框架提供了对这个注解的功能支持,使用自动注入给引用类型赋值，
支持byName，byType，默认是byName</li></ol> <h4 id="注解的使用步骤"><a href="#注解的使用步骤" class="header-anchor">#</a> 注解的使用步骤：</h4> <ol><li><p>加入依赖 ：spring-context, 间接加入spring-aop</p></li> <li><p>在类中加入注解</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//使用注解创建对象 默认类的第一个字母小写</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
 <span class="token comment">//可以在属性上，也可以在set方法上</span>
 <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
 <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;20&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

 <span class="token comment">//@Resource  设置byType @Resource（name=byType）</span>

 <span class="token comment">//@Autowired 默认byType  用byName加@Qualifier注解</span>
 <span class="token comment">//@Autowired(required=true) 默认true 注入失败报错，required=false 注入失败值为null。</span>
 <span class="token annotation punctuation">@Autowired</span>
 <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;mySchool&quot;</span><span class="token punctuation">)</span><span class="token comment">//设置byName</span>
 <span class="token keyword">private</span> <span class="token class-name">School</span> school<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>在spring的配置文件中，加入组件扫描器的标签<code>&lt;context:component-scan base-package=&quot;包名&quot;&gt;</code></p></li></ol> <h3 id="ioc能实现解耦合"><a href="#ioc能实现解耦合" class="header-anchor">#</a> ioc能实现解耦合</h3> <blockquote><p>ioc能够实现业务对象之间的解耦合， 例如service和dao对象之间的解耦合。</p></blockquote> <h2 id="第3章-aop-面向切面编程"><a href="#第3章-aop-面向切面编程" class="header-anchor">#</a> 第3章 AOP 面向切面编程</h2> <h3 id="动态代理"><a href="#动态代理" class="header-anchor">#</a> 动态代理</h3> <blockquote><p><a href="https://www.jianshu.com/p/9cdcf4e5c27d" target="_blank" rel="noopener noreferrer">动态代理是指<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>， 程序在整个运行过程中根本就不存在目标类的代理类，目标对象的代理
对象只是由代理生成工具（不是真实定义的类）在程序运行时由 JVM 根据反射等机制动态
生成的。代理对象与目标对象的代理关系在程序运行时才确立。</p></blockquote> <h4 id="jdk动态代理"><a href="#jdk动态代理" class="header-anchor">#</a> jdk动态代理</h4> <p>使用jdk反射包中的类实现创建代理对象的功能
要求：目标类必须实现接口</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaiLi</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>
	<span class="token comment">//目标对象</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">DaiLi</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//代理类的业务方法</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> session<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> obj<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            session<span class="token operator">=</span> <span class="token class-name">SqlSessionUtil</span><span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//处理业务逻辑</span>

            <span class="token comment">//真实对象的业务方法</span>
            obj<span class="token operator">=</span>method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//处理业务逻辑完毕</span>
            session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//异常回滚</span>
            session<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">SqlSessionUtil</span><span class="token punctuation">.</span><span class="token function">closeSession</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//获取代理对象</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h4 id="cglib动态代理"><a href="#cglib动态代理" class="header-anchor">#</a> cglib动态代理</h4> <p>使用第三方的工具库，实现代理对象的创建
要求：目标类必须能够继承，不能是final
原理：就是继承，子类就是代理</p> <h4 id="动态代理作用"><a href="#动态代理作用" class="header-anchor">#</a> 动态代理作用</h4> <ol><li>在目标类不修改源代码的情况下，增加功能</li> <li>减少重复的代码</li> <li>专注业务功能的实现</li> <li>解耦合： 业务功能和日志，事务这些非业务功能的耦合</li></ol> <h3 id="aop概述"><a href="#aop概述" class="header-anchor">#</a> AOP概述</h3> <ul><li>面向切面编程， 基于动态代理的，可以使用jdk，cglib两种代理方式。
Aop就是动态代理的规范化， 把动态代理的实现步骤，方式都定义好了，
让开发人员用一种统一的方式，使用动态代理。</li> <li>怎么理解面向切面编程 ？
1)需要在分析项目功能时，找出切面。
2)合理的安排切面的执行时间（在目标方法前， 还是目标方法后）
3)合理的安全切面执行的位置，在哪个类，哪个方法增加增强功能</li></ul> <h3 id="aop-编程术语-掌握"><a href="#aop-编程术语-掌握" class="header-anchor">#</a> AOP 编程术语(掌握)</h3> <ol><li>aspect：切面，表示给业务方法增加的功能，一般日志输出，事务，权限检查等是切面</li> <li>JoinPoint：连接点，连接点指可以被切面织入的具体方法。通常业务接口中的方法均为连接点。</li> <li>pointcut:切入点，是一个或多个JoinPoint的集合，表示切面功能执行的位置</li> <li>Target：目标对象，目标对象指将要被增强的对象 ，即包含主业务逻辑的类的对象 。</li> <li>advice：通知，也叫增强，表示切面执行的时间，在方法前，方法后等等</li></ol> <h3 id="什么时候考虑使用aop技术"><a href="#什么时候考虑使用aop技术" class="header-anchor">#</a> 什么时候考虑使用AOP技术</h3> <ol><li>当你要给一个系统中存在的类修改功能，但是原有类的功能不完善，但是你还有源代码，使用aop就增加功能</li> <li>你要给项目中的多个类，增加一个相同的功能，使用aop</li> <li>给业务方法增加事务， 日志输出</li></ol> <h3 id="aop的实现框架"><a href="#aop的实现框架" class="header-anchor">#</a> AOP的实现框架</h3> <ol><li>spring实现了aop， 实现方式是接口</li> <li><a href="http://www.eclipse.org/aspectj/" target="_blank" rel="noopener noreferrer">aspectj框架<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （一个优秀面向切面的框架，它扩展了 Java 语言，提供了强大的切面实现。）
<ol><li>使用注解可以实现aop的功能</li> <li>使用xml配置文件中的标签实现aop功能</li></ol></li></ol> <h3 id="aspectj框架的使用"><a href="#aspectj框架的使用" class="header-anchor">#</a> aspectj框架的使用</h3> <h4 id="表示切面位置的切入点表达式"><a href="#表示切面位置的切入点表达式" class="header-anchor">#</a> 表示切面位置的切入点表达式</h4> <p>execution(访问修饰符 <code>返回值</code> <code>包名.类名.方法名称(方法的参数)</code> 异常)</p> <p><img src="https://jaredh.oss-cn-shenzhen.aliyuncs.com/11.Spring%E5%AE%B6%E6%97%8F/img/01.Spring/spring_aspectj.jpg" alt="切入点表达式"></p> <h4 id="表示切面的执行时间-使用的通知注解"><a href="#表示切面的执行时间-使用的通知注解" class="header-anchor">#</a> 表示切面的执行时间，使用的通知注解</h4> <ol><li><p><strong><code>@Before</code> 前置通知</strong> 在目标方法之前先执行切面的功能</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span><span class="token comment">//定义切面类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Advice</span> <span class="token punctuation">{</span>
 <span class="token comment">//增强功能的方法</span>
 <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(public void com.test.service.pack01.OneServiceImpl.sayHi())&quot;</span><span class="token punctuation">)</span>
 <span class="token comment">//属性value表示切面执行的位置</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;在目标方法执行之前，例如输出日志&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p><strong><code>@AfterReturning</code> 后置通知</strong> 在目标方法之后执行的，能够获取到目标方法的返回值</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/* returning是目标方法的返回值，命名与通知方法的形参名一致
     相当于 Object obj = sayHi(String,Integer)
       AfterReturning(obj)
     可以修改这个返回值，影响最后调用的结果
*/</span>
 <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..OneServiceImpl.sayHi(String,Integer))&quot;</span><span class="token punctuation">,</span>returning <span class="token operator">=</span> <span class="token string">&quot;obj&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">AfterReturning</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> jp<span class="token punctuation">,</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">/*指定通知方法中的参数: JoinPoint
       JoinPoint（连接点）代表业务方法，要加入切面功能的业务方法 如sayHi
         作用是：可以在通知方法中获取方法执行时的信息，例如方法的名称，方法的实参。
         如果你的切面功能中需要用到方法的信息，就加入JoinPoint。
         这个JointPoint参数的值是由框架赋予，必须是第一个位置的参数
		
     System.out.println(&quot;方法的签名（定义）=&quot;+jp.getSignature());
     System.out.println(&quot;方法的名称 =&quot;+jp.getSignature().getName());
     //获取方法的实参
     Object args[] = jp.getArgs();
     for (Object arg:args
          ) {
	//可以用来判断目标方法的实参是否是想要的，然后再执行功能
         System.out.println(&quot;参数=&quot;+arg);
     }*/</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;见面时间&quot;</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li> <li><p><strong><code>@Around</code> 环绕通知</strong> 在目标方法前和后都能增强功能，控制目标方法的的访问，修改返回值</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/*
     @Around: 环绕通知
       属性：value 切入点表达式
       位置；在方法的定义上面
      特点：
       1.它是功能最强的通知
       2.在目标方法的前和后都能增强功能
       3.控制目标方法是否被调用执行
       4.修改原来的目标方法的执行结果，影响最后调用的结果
	  
      环绕通知等同与jdk动态代理的，InvocationHandler接口
         返回值就是目标方法的执行结果，可以被修改。
  */</span>
 <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..OneServiceImpl.sayHi(String,Integer))&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token class-name">Around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
     <span class="token class-name">Object</span> obj<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>

     <span class="token comment">//目标方法前加入功能</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;见面时间&quot;</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//通过ProceedingJoinPoint.proceed对目标方法的调用</span>
     pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//method.invoke();</span>

     <span class="token comment">//目标方法后加入功能</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;提交事务&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li> <li><p><strong><code>@AfterThrowing</code> 异常通知</strong> 在目标方法抛出异常后执行的通知</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">//throwing属性 用于指定发生的异常对象</span>
 <span class="token comment">//相当于try{目标方法}catch(){ myAfterThrowing(Throwable ex) }</span>
 <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..OneServiceImpl.sayHi(String,Integer))&quot;</span><span class="token punctuation">,</span>throwing <span class="token operator">=</span> <span class="token string">&quot;ex&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfterThrowing</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//记录异常信息</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;异常通知：异常发生时执行&quot;</span><span class="token operator">+</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p><strong><code>@After</code> 最终通知</strong> 总是会被执行的代码</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">//相当于 try{}catch(){}finally{ myAfter() }</span>
 <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;execution(* *..OneServiceImpl.sayHi(String,Integer))&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;最终通知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><strong><code>@Pointcut</code></strong> 定义和管理切入点的辅助注解</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token comment">/*@Pointcut : 定义和管理切入点，如果你的项目中有多个切入点表达式是重复的，可以复用的。
                     可以使用@Pointcut,统一管理切入点表达式。
        属性: value 切入点表达式
        位置: 在自定义的方法上面
       特点:
        当使用@Pointcut定义在一个方法的上面，此时这个方法就是切入点表达式的别名
        其他的通知中，value就可以使用这个方法代替切入点表达式。
  */</span>
 <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..OneServiceImpl.sayHi(String,Integer))&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">pointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//无需代码</span>
 <span class="token punctuation">}</span>
 <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;pointCut()&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;最终通知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>代理的使用方式</p> <ol><li>如果目标类有接口，框架使用jdk动态代理,得到service对象是<code>com.sun.proxy.$Proxy10</code></li> <li>如果目标类没有接口，默认使用的cglib动态代理,得到service对象是<code>com.test.service.pack04.OneServiceImpl$$EnhancerBySpringCGLIB$$eb85df45</code></li> <li>有接口也可以强制使用cglib动态代理</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token comment">&lt;!--
     声明自动代理对象：使用aspectj框架的功能，创建目标对象的代理对象。
     创建代理对象时在内存中实现的，修改目标对象的内存中的机构。
     使用目标对象就是被修改后的代理对象
 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">/&gt;</span></span>
 <span class="token comment">&lt;!--
 如果你期望目标类有接口，但使用cglib代理
 proxy-target-class=&quot;true&quot; 告诉框架使用cglib动态代理
 &lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;/&gt;
 --&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>maven依赖</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ol> <h2 id="第4章-spring集成mybatis"><a href="#第4章-spring集成mybatis" class="header-anchor">#</a> 第4章 Spring集成Mybatis</h2> <h3 id="整合的想法"><a href="#整合的想法" class="header-anchor">#</a> 整合的想法</h3> <p><strong>使用spring的ioc核心技术，把mybatis框架中使用的对象交给spring统一创建和管理。spring是容器，存放你项目中要使用的各种对象， 例如Service对象， Dao对象，工具类对象等等。</strong></p> <h3 id="mybatis使用步骤"><a href="#mybatis使用步骤" class="header-anchor">#</a> mybatis使用步骤</h3> <ol><li><p>定义dao接口 ，StudentDao,以及service接口和实现类</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentDao</span> <span class="token punctuation">{</span>
 <span class="token keyword">int</span> <span class="token function">insertStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//service.....</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>定义mapper文件 StudentDao.xml</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.JInterest.dao.StudentDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertStudent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   	 	insert into student values(#{id},#{name},#{email},#{age})
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectStudents<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   	 	select id,name,email,age from student order by id desc
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>定义mybatis的主配置文件 mybatis.xml</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--settings：控制mybatis全局行为--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--设置mybatis输出日志--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT_LOGGING<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--设置别名--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--name:实体类所在的包名
            表示cn.JInterest.domain包中的类名就是别名
            你可以使用Student表示cn.JInterest.domain.Student
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.JInterest.domain<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- sql mapper(sql映射文件)的位置--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
          name：是包名， 这个包中的所有mapper.xml一次都能加载
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.JInterest.dao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li> <li><p>创建dao的代理对象
<code>StudentDao dao = SqlSession.getMapper(StudentDao.class);</code> <code>List&lt;Student&gt; students = dao.selectStudents();</code></p></li> <li><p>要使用dao对象，需要使用getMapper()方法，
怎么能使用getMapper()方法，需要哪些条件
1)获取SqlSession对象， 需要使用SqlSessionFactory的openSession()方法。
2)创建SqlSessionFactory对象。 通过读取mybatis的主配置文件，能创建SqlSessionFactory对象
使用Factory能获取SqlSession，有了SqlSession就能有dao ，目的就是获取dao对象，最后service层调用dao对象</p></li> <li><p>spring整合mabatis后的applicationContext.xml文件
使用阿里公司的Druid连接池，配置文档：<a href="https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">DruidDataSource配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <details class="custom-block details"><summary>点击查看</summary> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
    https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   
    <span class="token comment">&lt;!--
       把数据库的配置信息，写在一个独立的文件，编译修改数据库的配置内容
       让spring知道jdbc.properties文件的位置
    --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   
    <span class="token comment">&lt;!--声明数据源DataSource, 作用是连接数据库的,代替了mybatis的连接方式--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>init<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--set注入给DruidDataSource提供连接数据库信息 --&gt;</span>
        <span class="token comment">&lt;!--
            使用属性配置文件中的数据，语法 ${key}
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--setUrl()--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.passwd}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxActive<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.max}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
   
    <span class="token comment">&lt;!--声明的是mybatis中提供的SqlSessionFactoryBean类，这个类内部创建SqlSessionFactory的--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--set注入，把数据库连接池付给了dataSource属性--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--mybatis主配置文件的位置
           configLocation属性是Resource类型，读取配置文件
           它的赋值，使用value，指定文件的路径，使用classpath:表示文件的位置
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>configLocation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:mybatis.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
   
    <span class="token comment">&lt;!--
        创建dao对象，使用SqlSession的getMapper（StudentDao.class）
        MapperScannerConfigurer:在内部调用getMapper()生成每个dao接口的代理对象 。
        org.apache.ibatis.binding.MapperProxy@9cd25ff
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--指定SqlSessionFactory对象的id--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBeanName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--指定包名， 包名是dao接口所在的包名。
            MapperScannerConfigurer会扫描这个包中的所有接口，把每个接口都执行
            一次getMapper()方法，得到每个接口的dao对象。
            创建好的dao对象放入到spring的容器中的。 dao对象的默认名称是 接口名首字母小写
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basePackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.JInterest.dao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
   
    <span class="token comment">&lt;!--声明service--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.JInterest.service.impl.StudentServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentDao<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div></details></li> <li><p>pom.xml</p> <details class="custom-block details"><summary>点击查看</summary> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.JInterest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring_04-mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>


  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--单元测试--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--spring核心ioc--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--做spring事务用到的--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--mybatis依赖--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--mybatis和spring集成的依赖--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--mysql驱动--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--阿里公司的数据库连接池--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--目的是把src/main/java目录中的xml文件包含到输出结果中。输出到classes目录中--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--所在的目录--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--包括目录下的.properties,.xml 文件都会扫描到--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div></details></li></ol> <h3 id="交给spring的mybatis对象"><a href="#交给spring的mybatis对象" class="header-anchor">#</a> 交给spring的mybatis对象</h3> <ol><li>数据源DataSource,使用阿里公司的Druid连接池</li> <li>SqlSessionFactory对象， 使用的SqlSessionFactoryBean在内部创建的SqlSessionFactory</li> <li>Dao代理对象，使用的MapperScannConfigure，在这个类的内部，调用getMapper()，创建接口的Dao对象</li></ol> <h2 id="第5章-spring事务"><a href="#第5章-spring事务" class="header-anchor">#</a> 第5章 Spring事务</h2> <h3 id="什么是事务"><a href="#什么是事务" class="header-anchor">#</a> 什么是事务</h3> <ul><li>讲mysql的时候，提出了事务。 事务是指一组sql语句的集合， 集合中有多条sql语句可能是insert ， update ，select ，delete，
我们希望这些多个sql语句都能成功，或者都失败， 这些sql语句的执行是一致的，作为一个整体执行。</li></ul> <h3 id="在什么时候想到使用事务"><a href="#在什么时候想到使用事务" class="header-anchor">#</a> 在什么时候想到使用事务</h3> <ul><li><p>当我的操作，涉及得到多个表，或者是多个sql语句的insert，update，delete。需要保证这些语句都是成功才能完成我的功能，
或者都失败，保证操作是符合要求的。</p></li> <li><p>在java代码中写程序，控制事务，此时事务应该放在那里呢？
service类的业务方法上，因为业务方法会调用多个dao方法，执行多个sql语句</p></li></ul> <h3 id="通常怎么处理事务"><a href="#通常怎么处理事务" class="header-anchor">#</a> 通常怎么处理事务</h3> <ul><li>jdbc访问数据库，处理事务  Connection conn ; conn.commit(); conn.rollback();</li> <li>mybatis访问数据库，处理事务， SqlSession.commit();  SqlSession.rollback();</li> <li>hibernate访问数据库，处理事务， Session.commit(); Session.rollback();</li></ul> <h3 id="问题中事务的处理方式-有什么不足"><a href="#问题中事务的处理方式-有什么不足" class="header-anchor">#</a> 问题中事务的处理方式，有什么不足</h3> <ol><li>不同的数据库访问技术，处理事务的对象，方法不同，需要了解不同数据库访问技术使用事务的原理</li> <li>掌握多种数据库中事务的处理逻辑。什么时候提交事务，什么时候回顾事务</li> <li>处理事务的多种方法。</li></ol> <ul><li>总结： 就是多种数据库的访问技术，有不同的事务处理的机制，对象，方法。</li></ul> <h3 id="怎么解决不足"><a href="#怎么解决不足" class="header-anchor">#</a> 怎么解决不足</h3> <ul><li>spring提供一种处理事务的统一模型， 能使用统一步骤，方式完成多种不同数据库访问技术的事务处理。
使用spring的事务处理机制，可以完成<strong>mybatis</strong>访问数据库的事务处理
使用spring的事务处理机制，可以完成<strong>hibernate</strong>访问数据库的事务处理。</li></ul> <h3 id="处理事务-需要怎么做-做什么"><a href="#处理事务-需要怎么做-做什么" class="header-anchor">#</a> 处理事务，需要怎么做，做什么</h3> <p><strong>spring处理事务的模型，使用的步骤都是固定的。把事务使用的信息提供给spring就可以了</strong></p> <ol><li><p>事务内部提交，回滚事务，使用的事务管理器对象，代替你完成commit，rollback事务管理器是一个接口和他的众多实现类。</p> <ul><li><p>接口：<strong>PlatformTransactionManager</strong> ，定义了事务重要方法 commit ，rollback</p></li> <li><p>实现类：spring把每一种数据库访问技术对应的事务处理类都创建好了。
mybatis访问数据库---spring创建好的是<strong>DataSourceTransactionManager</strong>
hibernate访问数据库----spring创建的是<strong>HibernateTransactionManager</strong></p></li> <li><p>怎么使用：你需要告诉spring 你用是那种数据库的访问技术，怎么告诉spring呢？
声明数据库访问技术对于的事务管理器实现类， 在spring的配置文件中使用<code>&lt;bean&gt;</code>声明就可以了
例如，你要使用mybatis访问数据库，你应该在xml配置文件中
<code>&lt;bean id=“xxx&quot; class=&quot;...DataSourceTransactionManager&quot;&gt;</code></p></li></ul></li> <li><p>你的业务方法需要什么样的事务，说明需要事务的类型。
说明方法需要的事务：</p> <ol><li><p>事务的隔离级别：有4个值。</p> <p>DEFAULT：采用 DB 默认的事务隔离级别。MySql 的默认为 REPEATABLE_READ； Oracle默认为 READ_COMMITTED。</p> <ul><li>READ_UNCOMMITTED：读未提交。未解决任何并发问题。</li> <li>READ_COMMITTED：读已提交。解决脏读，存在不可重复读与幻读。</li> <li>REPEATABLE_READ：可重复读。解决脏读、不可重复读，存在幻读</li> <li>SERIALIZABLE：串行化。不存在并发问题。</li></ul></li> <li><p>事务的超时时间： 表示一个方法最长的执行时间，如果方法执行时超过了时间，事务就回滚。</p> <p>单位是秒， 整数值， 默认是 <code>-1</code>. (涉及因素多，一般默认)</p></li> <li><p>事务的传播行为 ： 控制业务方法是不是有事务的， 是什么样的事务的。</p> <p>7个传播行为，表示你的业务方法调用时，事务在方法之间是如果使用的。 掌握以下三个：</p> <ul><li><p>PROPAGATION_REQUIRED(指定的方法必须在事务内执行。若当前存在事务，就加入到当前事务中；若当前没有事务，则创建一个新事务。)</p> <p><img src="https://jaredh.oss-cn-shenzhen.aliyuncs.com/11.Spring%E5%AE%B6%E6%97%8F/img/01.Spring/spring_PROPAGATION_REQUIRED.jpg" alt="PROPAGATION_REQUIRED"></p></li> <li><p>PROPAGATION_REQUIRES_SUPPORTS(指定的方法支持当前事务，但若当前没有事务，也可以以非事务方式执行。) <img src="https://jaredh.oss-cn-shenzhen.aliyuncs.com/11.Spring%E5%AE%B6%E6%97%8F/img/01.Spring/spring_PROPAGATION_REQUIRES_SUPPORTS.jpg" alt="PROPAGATION_REQUIRES_NEW"></p></li> <li><p>PROPAGATION_REQUIRES_NEW(总是新建一个事务，若当前存在事务，就将当前事务挂起，直到新事务执行完毕。) <img src="https://jaredh.oss-cn-shenzhen.aliyuncs.com/11.Spring%E5%AE%B6%E6%97%8F/img/01.Spring/spring_PROPAGATION_REQUIRES_NEW.jpg" alt="PROPAGATION_REQUIRES_NEW"></p></li></ul></li></ol></li> <li><p>spring提交事务，回滚事务的时机</p> <ol><li><p>当你的业务方法，执行成功，没有异常抛出，当方法执行完毕，spring在方法执行后提交事务。事务管理器commit</p></li> <li><p>当你的业务方法抛出<strong>运行时异常或ERROR</strong>， spring执行<strong>回滚</strong>，调用事务管理器的rollback
运行时异常的定义： RuntimeException  和他的子类都是运行时异常， 例如NullPointException , NumberFormatException</p></li> <li><p>当你的业务方法抛出<strong>非运行时异常</strong>， 主要是受查异常时，<strong>提交</strong>事务
受查异常：在你写代码中，必须处理的异常。例如IOException, SQLException</p></li></ol></li></ol> <h3 id="spring框架中提供的事务处理方案"><a href="#spring框架中提供的事务处理方案" class="header-anchor">#</a> spring框架中提供的事务处理方案</h3> <ol><li><p>适合中小项目使用的， 注解方案。
spring框架自己用aop实现给业务方法增加事务的功能， 使用**@Transactional<strong>注解增加事务。</strong>@Transactional<strong>注解是spring框架自己注解，放在</strong>public方法<strong>的上面，表示当前方法具有事务。
可以给注解的属性赋值，表示具体的</strong>隔离级别，传播行为，异常信息**等等</p> <ul><li>使用**@Transactional**的步骤：</li></ul> <ol><li><p>需要声明事务管理器对象
<code>&lt;bean id=&quot;xx&quot; class=&quot;DataSourceTransactionManager&quot;&gt;</code></p></li> <li><p>开启事务注解驱动， 告诉spring框架，我要使用注解的方式管理事务。
<code>&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;</code>
spring使用aop机制，创建**@Transactional**所在的类代理对象，给方法加入事务的功能。
在你的业务方法执行之前，先开启事务，在业务方法之后提交或回滚事务，使用aop的环绕通知</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
rollbackFor:表示发生指定的异常一定回滚.
处理逻辑是：
1) spring框架会首先检查方法抛出的异常是不是在rollbackFor的属性值中
2) 如果你的抛出的异常不在rollbackFor列表中，spring会判断异常是不是RuntimeException,
       如果是一定回滚。    
@Transactional(
      propagation = Propagation.REQUIRED,
      isolation = Isolation.DEFAULT,
      readOnly = false,
      rollbackFor = {
              NullPointerException.class,  NotEnoughException.class
      }
 )*/</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;你要增加的事务功能的业务方法名称&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Object</span> <span class="token function">myAround</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//开启事务，spring给你开启</span>
	 <span class="token keyword">try</span><span class="token punctuation">{</span>
	    <span class="token function">buy</span><span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//spring的事务管理器.commit();</span>
	 <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//spring的事务管理器.rollback();</span>
	 <span class="token punctuation">}</span> 
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></li></ol></li> <li><p>适合大型项目，有很多的类，方法，需要大量的配置事务，使用aspectj框架功能，在spring配置文件中声明类，方法需要的事务。这种方式业务方法和事务配置完全分离。</p> <p><strong>实现步骤： 都是在xml配置文件中实现。</strong></p> <ol><li><p>要使用的是aspectj框架，需要加入依赖</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>声明事务管理器对象</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>声明方法需要的事务类型（配置方法的事务属性【隔离级别，传播行为，超时】）</p></li> <li><p>配置aop：指定哪些哪类要创建代理。</p></li></ol></li></ol> <details class="custom-block details"><summary>spring配置</summary> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
数据源配置
.....
.....
--&gt;</span>
    <span class="token comment">&lt;!--声明式事务处理：和源代码完全分离的--&gt;</span>
    <span class="token comment">&lt;!--1.声明事务管理器对象--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--2.声明业务方法它的事务属性（隔离级别，传播行为，超时时间）
      id:自定义名称，表示 &lt;tx:advice&gt; 和 &lt;/tx:advice&gt;之间的配置内容的
      transaction-manager:事务管理器对象的id
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--tx:attributes：配置事务属性--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--tx:method：给具体的方法配置事务属性，method可以有多个，分别给不同的方法设置事务属性
            name:1）完整的方法名称，不带有包和类。
			2）方法可以使用通配符,* 表示任意字符
            propagation：传播行为，枚举值
            isolation：隔离级别
            rollback-for：你指定的异常类名，全限定类名。 发生异常一定回滚
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">isolation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DEFAULT<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.NullPointerException,cn.JInterest.except.NotEnoughException<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		
        <span class="token comment">&lt;!--使用通配符，指定很多的方法,从上往下匹配--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRES_NEW<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--指定修改方法--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modify*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--删除方法--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remove*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--查询方法，query，search，find--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUPPORTS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--配置aop--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--配置切入点表达式：指定哪些包中类，要使用事务
        id:切入点表达式的名称，唯一值
        expression：切入点表达式，指定哪些类要使用事务，aspectj会创建代理对象

        com.crm.service
        com.service
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>servicePt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *..service..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--配置增强器：关联adivce和pointcut
       advice-ref:通知，上面tx:advice哪里的配置
       pointcut-ref：切入点表达式的id
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>servicePt<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div></details> <h3 id="总结spring的事务"><a href="#总结spring的事务" class="header-anchor">#</a> 总结spring的事务</h3> <ol><li>管理事务的是 事务管理和他的实现类</li> <li>spring的事务是一个统一模型
1）指定要使用的事务管理器实现类，使用<code>&lt;bean&gt;</code>
2）指定哪些类，哪些方法需要加入事务的功能
3）指定方法需要的隔离级别，传播行为，超时
你需要告诉spring，你的项目中类信息，方法的名称，方法的事务传播行为。</li></ol> <h2 id="第6章-web项目怎么使用容器对象"><a href="#第6章-web项目怎么使用容器对象" class="header-anchor">#</a> 第6章 Web项目怎么使用容器对象</h2> <ul><li><p>web使用容器对象：
servlet接受请求调用service层做数据操作</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//请求数据...</span>

      <span class="token comment">//创建spring的容器对象</span>
      <span class="token class-name">String</span> config<span class="token operator">=</span> <span class="token string">&quot;spring.xml&quot;</span><span class="token punctuation">;</span>
      <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
      <span class="token comment">//获取service,处理业务</span>
	<span class="token class-name">StudentService</span> service  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">StudentService</span><span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;studentService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	service<span class="token punctuation">.</span><span class="token function">addStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>需要的依赖</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token comment">&lt;!-- servlet依赖 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- jsp依赖 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.1-b03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>因为web项目是在tomcat服务器上运行的。tomcat启动，项目就一直运行。如果用上面那种方式，获得一次请求就要创建一次ApplicationContext对象，然后把spring.xml文件中所有对象创建出来，同时发送100个请求就要创建100个，垃圾回收器还没来得及回收又创建了，这样很浪费内存</p> <p><strong>解决方案：</strong> 容器对象创建一次， 把容器对象放入到全局作用域ServletContext中。
<strong>实现：</strong> 使用监听器 当全局作用域对象被创建时 创建容器 存入ServletContext
1）配置web.xml</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--注册监听器ContextLoaderListener
    监听器被创建对象后，会读取/WEB-INF/spring.xml
    为什么要读取文件：因为在监听器中要创建ApplicationContext对象，需要加载配置文件。
    /WEB-INF/applicationContext.xml就是监听器默认读取的spring配置文件路径

    可以修改默认的文件位置，使用context-param重新指定文件的位置

    配置监听器：目的是创建容器对象，创建了容器对象， 就能把spring.xml配置文件中的所有对象都创建好。
    用户发起请求就可以直接使用对象了。
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- contextConfigLocation:表示配置文件的路径  --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--自定义配置文件的路径--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:spring.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>2)加入监听器依赖</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>3)servlet接受请求调用service层做数据操作</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//使用框架中的方法，获取容器对象</span>
<span class="token class-name">WebApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token class-name">ServletContext</span> sc <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ctx <span class="token operator">=</span> <span class="token class-name">WebApplicationContextUtils</span><span class="token punctuation">.</span><span class="token function">getRequiredWebApplicationContext</span><span class="token punctuation">(</span> sc <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;容器对象的信息========&quot;</span><span class="token operator">+</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">//获取service,处理业务</span>
<span class="token class-name">StudentService</span> service  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">StudentService</span><span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;studentService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
service<span class="token punctuation">.</span><span class="token function">addStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>WebApplicationContext底层实现
查其源码，看其调用关系，就可看到其是从 ServletContext 中读取的属性值，即 Spring容器。
<img src="https://jaredh.oss-cn-shenzhen.aliyuncs.com/11.Spring%E5%AE%B6%E6%97%8F/img/01.Spring/spring_ServletContext%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC.jpg" alt="">
(容器对象在 ServletContext 的中存放的 key 为 WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE。)</p></li></ul></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Spring" title="标签">#Spring</a><a href="/tags/?tag=java%E6%A1%86%E6%9E%B6" title="标签">#java框架</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/05/04, 00:39:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/0bbf90/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">RabbitMQ</div></a> <a href="/pages/9b8d04/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">SpringMVC</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/0bbf90/" class="prev">RabbitMQ</a></span> <span class="next"><a href="/pages/9b8d04/">SpringMVC</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:hwj2586@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Jaredhi" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/Jared-h" title="GitHub" target="_blank" class="iconfont icon-gitee"></a><a href="https://t.kugou.com/2npMP0dxWV2" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
    Theme by
    <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a>
    Copyright © 2020-2021
    <span>Jared H <br> <a href="https://www.beian.miit.gov.cn" target="_blank">粤ICP备20046800号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.dce23f32.js" defer></script><script src="/assets/js/2.0a476569.js" defer></script><script src="/assets/js/3.03310ead.js" defer></script><script src="/assets/js/54.f893c428.js" defer></script>
  </body>
</html>