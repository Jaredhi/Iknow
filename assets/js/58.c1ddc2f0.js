(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{479:function(s,n,t){"use strict";t.r(n);var a=t(15),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("正向代理：类似一个跳板机，由代理客户端去请求服务器。比如：我是一个用户，我访问不了某网站，但是我能访问一个代理服务器，这个代理服务器，它能访问那个我不能访问的网站，于是我先连上代理服务器，告诉它我需要那个无法访问网站的内容，代理服务器去取回来,然后返回给我。")])]),s._v(" "),t("li",[t("p",[s._v("反向代理（Reverse Proxy）：以代理服务器来接受 internet 上的连接请求，然后转发各内部网络上的服务器并将从服务器上得到的结果返回给 internet 上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。")])]),s._v(" "),t("li",[t("p",[s._v("两者的区别："),t("strong",[s._v("正向代理")]),s._v("代理的对象是客户端，"),t("strong",[s._v("反向代理")]),s._v("代理的对象是服务端")])])]),s._v(" "),t("p",[s._v("🔜💡"),t("a",{attrs:{href:"https://www.zhihu.com/question/24723688/answer/128105528",target:"_blank",rel:"noopener noreferrer"}},[s._v("正向代理与反向代理通俗解释"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"nginx-的优点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-的优点"}},[s._v("#")]),s._v(" nginx 的优点")]),s._v(" "),t("ol",[t("li",[s._v("高并发。静态小文件")]),s._v(" "),t("li",[s._v("占用资源少。2万并发、10个线程，内存消耗几百M。")]),s._v(" "),t("li",[s._v("功能种类比较多。web,cache,proxy。每一个功能都不是特别强。")]),s._v(" "),t("li",[s._v("支持epoll模型，使得nginx可以支持高并发。")]),s._v(" "),t("li",[s._v("nginx 配合动态服务和Apache有区别。（FASTCGI 接口）")]),s._v(" "),t("li",[s._v("利用nginx可以对IP限速，可以限制连接数。")]),s._v(" "),t("li",[s._v("配置简单，更灵活。")])]),s._v(" "),t("h2",{attrs:{id:"nginx-应用场合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-应用场合"}},[s._v("#")]),s._v(" nginx 应用场合")]),s._v(" "),t("ol",[t("li",[s._v("静态服务器。（图片，视频服务）另一个lighttpd。并发几万，html，js，css，flv，jpg，gif等。")]),s._v(" "),t("li",[s._v("动态服务。")]),s._v(" "),t("li",[s._v("反向代理，负载均衡。日pv2000W以下，都可以直接用nginx做代理。")]),s._v(" "),t("li",[s._v("缓存服务。类似 SQUID,VARNISH。")])]),s._v(" "),t("h2",{attrs:{id:"nginx-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-安装"}},[s._v("#")]),s._v(" nginx 安装")]),s._v(" "),t("p",[s._v("这里使用⛳️ "),t("a",{attrs:{href:"https://jaredh.cn/pages/91630a/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker"),t("OutboundLink")],1),s._v(" 容器快速安装，省去了许多繁琐的配置，便于我们更快的掌握 nginx 的使用。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker run nginx:1.18\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("具体"),t("a",{attrs:{href:"https://jaredh.cn/pages/0e922d/#nginx",target:"_blank",rel:"noopener noreferrer"}},[s._v("挂载配置"),t("OutboundLink")],1)])]),s._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[s._v("点击查看")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run --name nginx -d -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /opt/nginx/conf/nginx.conf:/etc/nginx/nginx.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /opt/nginx/logs:/var/log/nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /opt/nginx/conf.d/:/etc/nginx/conf.d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /opt/nginx/html:/usr/share/nginx/html "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d nginx:1.18\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("ul",[t("li",[s._v("docker 进入 nginx 容器内部 "),t("code",[s._v("docker exec -it 容器id /bin/bash")])])]),s._v(" "),t("h2",{attrs:{id:"nginx-常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-常用命令"}},[s._v("#")]),s._v(" nginx 常用命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("nginx  -t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证配置是否正确: ")]),s._v("\nnginx  -V\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看详细的版本号")]),s._v("\nnginx  -v\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看简洁版本号")]),s._v("\nstart  nginx \t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\nnginx   -s   stop\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 快速停止或关闭")]),s._v("\nnginx   -s   quit\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正常停止或关闭")]),s._v("\nnginx   -s  reload\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置文件修改重装载命令")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"nginx-监控"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-监控"}},[s._v("#")]),s._v(" nginx 监控")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("开启状态页")]),s._v(" "),t("div",{staticClass:"language-nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在http块内添加")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" localost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设定查看Nginx状态的地址   ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("NginxStatus "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stub_status")]),s._v(" on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   \n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("access_log")]),s._v(" off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   \n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# auth_basic "Please input password";   ')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# auth_basic_user_file conf.d/pwd;   ")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("stub_status")]),s._v("  : (on/off) 表示开启 stubStatus 的工作状态统计功能。")]),s._v(" "),t("li",[t("code",[s._v("access_log")]),s._v(" : (on/off)  关闭 access_log 日志记录功能。")]),s._v(" "),t("li",[t("code",[s._v("auth_basic")]),s._v(" : nginx 的一种认证机制，后面是验证时的提示信息。")]),s._v(" "),t("li",[t("code",[s._v("auth_basic_user_file")]),s._v(" : 用来指定密码文件的位置。")])])]),s._v(" "),t("li",[t("p",[s._v("访问："),t("code",[s._v("curl http://127.0.0.1/NginxStatus")])]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Active connections: 2 \nserver accepts handled requests\n 2 2 5 \nReading: 0 Writing: 1 Waiting: 1 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("Active connections")]),s._v(" : 活跃的连接数量")]),s._v(" "),t("li",[t("code",[s._v("server accepts handled requests")]),s._v(" : 总共处理了2个连接 , 成功创建2次握手, 总共处理了5个请求")]),s._v(" "),t("li",[t("code",[s._v("Reading")]),s._v(" :  读取客户端的连接数.")]),s._v(" "),t("li",[t("code",[s._v("Writing")]),s._v(" :  响应数据到客户端的数量")]),s._v(" "),t("li",[t("code",[s._v("Waiting")]),s._v(" :  开启 keep-alive 的情况下,这个值等于 active – (reading+writing), 意思就是 Nginx 已经处理完正在等候下一次请求指令的驻留连接.")])])]),s._v(" "),t("li",[t("p",[s._v("配置登录密码")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 htpasswd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y httpd-tools\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置用户名和密码，并把用户名、密码保存到指定文件中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" htpasswd -c "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v(" mynginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存文件名  用户名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按提示输入两次密码")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看密码（加密后）/opt/nginx/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@iZwz pwd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\nmynginx:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$apr1")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RH3sT")]),s._v(".3F"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DKYdWYHZGWEajsj")]),s._v(".fjHbU.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("最后将上面注释打开"),t("code",[s._v("auth_basic")]),s._v("，"),t("code",[s._v("auth_basic_user_file")]),s._v("，重启 nginx")])])]),s._v(" "),t("h2",{attrs:{id:""}},[t("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),t("p",[s._v("🍖  "),t("strong",[s._v("参考")])]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/biglittleant/p/8979966.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("死磕 nginx 系列"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/sanduzxcvbnm/p/11274080.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx 配置访问密码"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=e.exports}}]);