(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{500:function(t,e,a){"use strict";a.r(e);var s=a(15),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("blockquote",[a("p",[t._v("Apache JMeter是Apache组织开发的基于Java的压力测试工具。用于对软件做压力测试，它最初被设计用于Web应用测试，但后来扩展到其他测试领域。 它可以用于测试静态和动态资源，例如静态文件、Java "),a("a",{attrs:{href:"https://baike.baidu.com/item/%E5%B0%8F%E6%9C%8D%E5%8A%A1%E7%A8%8B%E5%BA%8F/4148836",target:"_blank",rel:"noopener noreferrer"}},[t._v("小服务程序"),a("OutboundLink")],1),t._v("、CGI 脚本、Java 对象、数据库、FTP 服务器， 等等。JMeter 可以用于对服务器、网络或对象模拟巨大的负载，来自不同压力类别下测试它们的强度和分析整体性能。另外，JMeter能够对应用程序做功能/"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E5%9B%9E%E5%BD%92%E6%B5%8B%E8%AF%95/1925732",target:"_blank",rel:"noopener noreferrer"}},[t._v("回归测试"),a("OutboundLink")],1),t._v("，通过创建带有断言的脚本来验证你的程序返回了你期望的结果。为了最大限度的灵活性，JMeter允许"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/6555484",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用正则表达式"),a("OutboundLink")],1),t._v("创建断言。")])]),t._v(" "),a("h2",{attrs:{id:"_1、jmeter的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、jmeter的安装"}},[t._v("#")]),t._v(" 1、Jmeter的安装")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://jmeter.apache.org/download_jmeter.cgi",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网下载地址"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("我这里是mac系统所以选择tgz，Windows选择zip下载。5.3的JDK版本要求是8以上。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/Jmeter-download.png",alt:"image-20201120202043195"}})]),t._v(" "),a("ul",[a("li",[t._v("Binaries：二进制版，即已经编译好、可直接执行；")]),t._v(" "),a("li",[t._v("Source：源代码版，需要自己编译；")])]),t._v(" "),a("h2",{attrs:{id:"_2、启动jmeter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、启动jmeter"}},[t._v("#")]),t._v(" 2、启动Jmeter")]),t._v(" "),a("ul",[a("li",[t._v("解压完成后进入bin目录使用命令"),a("code",[t._v("sh jmeter")]),t._v("启动，Windows点击Jmeter.bat")]),t._v(" "),a("li",[t._v("进入图形化界面后，可以设置中文")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-setlanguage.png",alt:"jmeter-setlanguage"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("为了方便启动，设置环境变量，以后就不用每次都进入到Jmeter目录启动。")]),t._v(" "),a("p",[a("em",[t._v("以下是macos配置，Windows操作差不多，也是在系统变量上添加对应的路径。")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("通过"),a("code",[t._v("vim ~/.bash_profile")]),t._v("添加以下内容。(Jmeter对应的路径)")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JMETER_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/Users/des/apache-jmeter-5.3\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v(":.:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JMETER_HOME")]),t._v("/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CLASSPATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(".:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/dt.jar:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JMETER_HOME")]),t._v("/lib/ext/ApacheJMeter_core.jar:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JMETER_HOME")]),t._v("/lib/jorphan.jar\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("保存退出。"),a("code",[t._v("source ~/.bash_profile")]),t._v(" 刷新配置，然后在终端（任意目录）输入"),a("code",[t._v("jmeter")]),t._v("，即可启动JMeter。")])])])])]),t._v(" "),a("h2",{attrs:{id:"_3、jmeter的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、jmeter的使用"}},[t._v("#")]),t._v(" 3、Jmeter的使用")]),t._v(" "),a("h3",{attrs:{id:"_1-对docker容器-nginx进行压测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-对docker容器-nginx进行压测"}},[t._v("#")]),t._v(" 1. 对docker容器 nginx进行压测")]),t._v(" "),a("h4",{attrs:{id:"_1-1-新建一个线程组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-新建一个线程组"}},[t._v("#")]),t._v(" 1.1 新建一个线程组")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example0.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"_1-2-添加一个取样器-http请求。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-添加一个取样器-http请求。"}},[t._v("#")]),t._v(" 1.2 添加一个取样器，http请求。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example1.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"_1-3-添加几个监听器-观察压测过程。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-添加几个监听器-观察压测过程。"}},[t._v("#")]),t._v(" 1.3 添加几个监听器，观察压测过程。")]),t._v(" "),a("p",[t._v("一般图中红框的三个就够用了。其他有需要可以自己琢磨~")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example2.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"_1-4-设置请求地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-设置请求地址"}},[t._v("#")]),t._v(" 1.4 设置请求地址")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example4.png",alt:"jmeter-example4"}})]),t._v(" "),a("h4",{attrs:{id:"_1-5-启动线程数-勾选了循环次数需要手动暂停。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-启动线程数-勾选了循环次数需要手动暂停。"}},[t._v("#")]),t._v(" 1.5 启动线程数，勾选了循环次数需要手动暂停。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example5.png",alt:""}})]),t._v(" "),a("p",[t._v("运行出现会出现提示让你先保存。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example3.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"_1-6-压测结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-压测结果"}},[t._v("#")]),t._v(" 1.6 压测结果")]),t._v(" "),a("p",[a("strong",[t._v("察看结果树")])]),t._v(" "),a("p",[t._v("最后出现错误是因为，手动关闭导致请求已发出但是socket已经关闭。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example6.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("汇总报告")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example7.png",alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("样本：236754次请求，也就是发出请求数。")]),t._v(" "),a("li",[t._v("平均值：平均响应时间（单位：ms）。")]),t._v(" "),a("li",[t._v("最小\\大值：最小\\大响应时间。")]),t._v(" "),a("li",[t._v("标准偏差：反映样本跟平均值的反差程度，数值越大越不稳定.")]),t._v(" "),a("li",[t._v("吞吐量：每秒的并发访问数量。")])]),t._v(" "),a("h4",{attrs:{id:"聚合报告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#聚合报告"}},[t._v("#")]),t._v(" 聚合报告")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jmeter-example8.png",alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("中位数，也就是 50％ 用户的响应时间。")]),t._v(" "),a("li",[t._v("xx百分位：对应90%、95%、99%用户的响应时间。")])]),t._v(" "),a("h3",{attrs:{id:"_2-压测微服务项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-压测微服务项目"}},[t._v("#")]),t._v(" 2. 压测微服务项目")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("压测内容(稳定时数据)")]),t._v(" "),a("th",[t._v("压测线程数")]),t._v(" "),a("th",[t._v("吞吐量/s")]),t._v(" "),a("th",[t._v("90%响应时间")]),t._v(" "),a("th",[t._v("99%响应时间")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Nginx")]),t._v(" "),a("td",[t._v("50")]),t._v(" "),a("td",[t._v("7530")]),t._v(" "),a("td",[t._v("7")]),t._v(" "),a("td",[t._v("37")])]),t._v(" "),a("tr",[a("td",[t._v("Gateway")]),t._v(" "),a("td",[t._v("50")]),t._v(" "),a("td",[t._v("25387")]),t._v(" "),a("td",[t._v("3")]),t._v(" "),a("td",[t._v("14")])]),t._v(" "),a("tr",[a("td",[t._v("简单服务")]),t._v(" "),a("td",[t._v("50")]),t._v(" "),a("td",[t._v("15585")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("19")])]),t._v(" "),a("tr",[a("td",[t._v("首页渲染（关模板缓存）")]),t._v(" "),a("td",[t._v("50")]),t._v(" "),a("td",[t._v("96")]),t._v(" "),a("td",[t._v("643")]),t._v(" "),a("td",[t._v("876")])]),t._v(" "),a("tr",[a("td",[t._v("三级分类数据获取")]),t._v(" "),a("td",[t._v("50")]),t._v(" "),a("td",[t._v("31")]),t._v(" "),a("td",[t._v("1830")]),t._v(" "),a("td",[t._v("2911")])]),t._v(" "),a("tr",[a("td",[t._v("Gateway+简单服务")]),t._v(" "),a("td",[t._v("50")]),t._v(" "),a("td",[t._v("1040")]),t._v(" "),a("td",[t._v("86")]),t._v(" "),a("td",[t._v("159")])]),t._v(" "),a("tr",[a("td",[t._v("全链路")]),t._v(" "),a("td",[t._v("50")]),t._v(" "),a("td",[t._v("20")]),t._v(" "),a("td",[t._v("3309")]),t._v(" "),a("td",[t._v("24911")])])])]),t._v(" "),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("ul",[a("li",[t._v("中间件越多，性能损耗越大，大多都损失在网络交互了。")]),t._v(" "),a("li",[t._v("硬件设施：可能是虚拟机装在外接机械硬盘导致io传输慢")]),t._v(" "),a("li",[t._v("业务优化：\n"),a("ul",[a("li",[t._v("DB")]),t._v(" "),a("li",[t._v("模板的渲染速度")]),t._v(" "),a("li",[t._v("静态资源")])])])]),t._v(" "),a("h2",{attrs:{id:"附录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[t._v("#")]),t._v(" 附录：")]),t._v(" "),a("h3",{attrs:{id:"jvisualvm-jdk自带jvm监控工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvisualvm-jdk自带jvm监控工具"}},[t._v("#")]),t._v(" jvisualvm：JDK自带JVM监控工具")]),t._v(" "),a("p",[t._v("命令行窗口输入"),a("code",[t._v("jvisualvm")]),t._v("启动")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinterest.oss-cn-shenzhen.aliyuncs.com/img/jvisualvm-index.png",alt:""}})])])}),[],!1,null,null,null);e.default=r.exports}}]);