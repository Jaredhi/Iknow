(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{486:function(s,t,a){"use strict";a.r(t);var n=a(15),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-在模块的pom文件引入依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-在模块的pom文件引入依赖"}},[s._v("#")]),s._v(" 1."),a("strong",[s._v("在模块的pom文件引入依赖")])]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--nacos配置中心--\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-cloud-starter-alibaba-nacos-config"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"_2-创建bootstrap-properties配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建bootstrap-properties配置文件"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.创建bootstrap.properties配置文件")])]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置中心地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.server-addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("127.0.0.1:8848")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#spring.profiles.active=dev")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该配置影响统一配置中心中的dataId")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.application.name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("service-gateway")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#yaml 格式需要加上")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.file-extension")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("yaml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果设置了分组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("strong",[s._v("补充：springboot配置文件加载顺序")])]),s._v(" "),a("p",[a("strong",[s._v("（1）加载顺序")])]),s._v(" "),a("p",[s._v("这里主要是说明application和bootstrap的加载顺序。")]),s._v(" "),a("p",[s._v("bootstrap.yml（bootstrap.properties）先加载")]),s._v(" "),a("p",[s._v("application.yml（application.properties）后加载")]),s._v(" "),a("p",[s._v("bootstrap.yml 用于应用程序上下文的引导阶段。")]),s._v(" "),a("p",[s._v("bootstrap.yml 由父Spring ApplicationContext加载。")]),s._v(" "),a("p",[s._v("父ApplicationContext 被加载到使用 application.yml 的之前。")]),s._v(" "),a("p",[a("strong",[s._v("（2）配置区别")]),s._v("\nbootstrap.yml 和application.yml 都可以用来配置参数。")]),s._v(" "),a("p",[s._v("bootstrap.yml 可以理解成系统级别的一些参数配置，这些参数一般是不会变动的。")]),s._v(" "),a("p",[s._v("application.yml 可以用来定义应用级别的。")]),s._v(" "),a("h2",{attrs:{id:"_3-nacos中新建配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-nacos中新建配置"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.Nacos中新建配置")])]),s._v(" "),a("p",[a("strong",[a("img",{attrs:{src:"https://www.jaredh.cn/15.%E5%88%86%E5%B8%83%E5%BC%8F-%E5%BE%AE%E6%9C%8D%E5%8A%A1/img/00.nacos/nacos_1.jpg",alt:"nacos_1"}})])]),s._v(" "),a("p",[a("strong",[s._v("Data ID 的完整规则格式如下")])]),s._v(" "),a("p",[a("strong",[a("code",[s._v("${prefix}")]),s._v("-"),a("code",[s._v("${spring.profile.active}")]),s._v("."),a("code",[s._v("${file-extension}")])])]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("prefix:")]),s._v(" 默认为所属工程配置"),a("strong",[s._v("spring.application.name 的值")]),s._v("（即：nacos-provider），也可以通过配置项 spring.cloud.nacos.config.prefix来配置。")])]),s._v(" "),a("li",[a("p",[s._v("**spring.profiles.active=dev: ** 即为当前环境对应的 profile。 注意：当 "),a("strong",[s._v("spring.profiles.active")]),s._v(" 为空时，对应的连接符 - 也将不存在，dataId 的拼接格式变成"),a("code",[s._v("$")]),s._v("{prefix}.​"),a("code",[s._v("$")]),s._v("{file-extension}")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("file-exetension")]),s._v(" 为配置内容的数据格式，可以通过配置项 spring.cloud.nacos.config.file-extension 来配置。目前只支持 properties 和 yaml 类型")])])]),s._v(" "),a("h2",{attrs:{id:"_4-创建不同空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-创建不同空间"}},[s._v("#")]),s._v(" "),a("strong",[s._v("4.创建不同空间")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://www.jaredh.cn/15.%E5%88%86%E5%B8%83%E5%BC%8F-%E5%BE%AE%E6%9C%8D%E5%8A%A1/img/00.nacos/nacos_2.jpg",alt:""}})]),s._v(" "),a("p",[s._v("在bootstrap.properties 加上")]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("对应id")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_5-多配置文件加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-多配置文件加载"}},[s._v("#")]),s._v(" "),a("strong",[s._v("5.多配置文件加载")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://www.jaredh.cn/15.%E5%88%86%E5%B8%83%E5%BC%8F-%E5%BE%AE%E6%9C%8D%E5%8A%A1/img/00.nacos/nacos_3.jpg",alt:""}})]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.ext-config[0].data-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("redis.properties")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启动态刷新配置，否则配置文件修改，工程无法感知")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.ext-config[0].refresh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.ext-config[0].group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.ext-config[1].data-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("jdbc.properties")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.ext-config[1].refresh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.cloud.nacos.config.ext-config[1].group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);